import{d as w,u as x,A as p,G as k,c as d,a as o,t as c,b as a,g as B,a1 as g,o as l}from"./index-D93aXvJu.js";import{s as _,a as S}from"./webviewMessage-DVGAI4ol.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};i.SENTRY_RELEASE={id:"051ca6428b97c6d36ca483b6bd6aaeed95b441f8"}}catch{}})();try{(function(){var i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new i.Error().stack;r&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[r]="faa8b5d0-e670-49cc-9e6a-64158514d878",i._sentryDebugIdIdentifier="sentry-dbid-faa8b5d0-e670-49cc-9e6a-64158514d878")})()}catch{}const U={style:{"margin-top":"20px"}},A={style:{"min-height":"24px",color:"#666","font-size":"14px"}},R={key:0},L={key:1},C={style:{"margin-top":"30px"}},J={style:{"min-height":"24px",color:"#666","font-size":"14px"}},I={key:0},D=w({name:"ShopPage",__name:"shop",setup(i){const r=x(),u=p(""),s=p(""),e=p("");async function v(){u.value="",await _("shop")?(u.value="✅ 测试消息已发送",setTimeout(()=>{u.value=""},3e3)):(u.value="❌ 发送失败",setTimeout(()=>{u.value=""},3e3))}async function f(){s.value="",await S({action:"custom",page:"shop",data:{message:'这是一条来自"商城"页面的自定义消息',timestamp:Date.now()}})?(s.value="✅ 自定义消息已发送",setTimeout(()=>{s.value=""},3e3)):(s.value="❌ 发送失败",setTimeout(()=>{s.value=""},3e3))}function b(){e.value="";const n=window.uni;if(!n||typeof n.navigateTo!="function"){e.value="❌ uni.navigateTo 不可用，请等待 UniAppJSBridgeReady 事件",console.warn("uni.navigateTo 不可用，请等待 UniAppJSBridgeReady 事件"),setTimeout(()=>{e.value=""},3e3);return}try{n.navigateTo({url:"/pages/index/order"}),e.value="✅ uni.navigateTo 调用成功",console.log("✅ uni.navigateTo 调用成功"),setTimeout(()=>{e.value=""},3e3)}catch(t){e.value="❌ uni.navigateTo 调用失败（查看控制台）",console.error("❌ uni.navigateTo 调用失败:",t),setTimeout(()=>{e.value=""},3e3)}}function y(){e.value="";const n=window.uni;if(!n||typeof n.redirectTo!="function"){e.value="❌ uni.redirectTo 不可用，请等待 UniAppJSBridgeReady 事件",console.warn("uni.redirectTo 不可用，请等待 UniAppJSBridgeReady 事件"),setTimeout(()=>{e.value=""},3e3);return}try{n.redirectTo({url:"/pages/index/mine"}),e.value="✅ uni.redirectTo 调用成功",console.log("✅ uni.redirectTo 调用成功"),setTimeout(()=>{e.value=""},3e3)}catch(t){e.value="❌ uni.redirectTo 调用失败（查看控制台）",console.error("❌ uni.redirectTo 调用失败:",t),setTimeout(()=>{e.value=""},3e3)}}function T(){e.value="";const n=window.uni;if(!n||typeof n.reLaunch!="function"){e.value="❌ uni.reLaunch 不可用，请等待 UniAppJSBridgeReady 事件",console.warn("uni.reLaunch 不可用，请等待 UniAppJSBridgeReady 事件"),setTimeout(()=>{e.value=""},3e3);return}try{n.reLaunch({url:"/pages/index/shop"}),e.value="✅ uni.reLaunch 调用成功",console.log("✅ uni.reLaunch 调用成功"),setTimeout(()=>{e.value=""},3e3)}catch(t){e.value="❌ uni.reLaunch 调用失败（查看控制台）",console.error("❌ uni.reLaunch 调用失败:",t),setTimeout(()=>{e.value=""},3e3)}}function h(){e.value="";const n=window.uni;if(!n||typeof n.switchTab!="function"){e.value="❌ uni.switchTab 不可用，请等待 UniAppJSBridgeReady 事件",console.warn("uni.switchTab 不可用，请等待 UniAppJSBridgeReady 事件"),setTimeout(()=>{e.value=""},3e3);return}try{n.switchTab({url:"/pages/index/shop"}),e.value="✅ uni.switchTab 调用成功",console.log("✅ uni.switchTab 调用成功"),setTimeout(()=>{e.value=""},3e3)}catch(t){e.value="❌ uni.switchTab 调用失败（查看控制台）",console.error("❌ uni.switchTab 调用失败:",t),setTimeout(()=>{e.value=""},3e3)}}function m(){e.value="";const n=window.uni;if(!n||typeof n.navigateBack!="function"){e.value="❌ uni.navigateBack 不可用，请等待 UniAppJSBridgeReady 事件",console.warn("uni.navigateBack 不可用，请等待 UniAppJSBridgeReady 事件"),setTimeout(()=>{e.value=""},3e3);return}try{n.navigateBack({delta:1}),e.value="✅ uni.navigateBack 调用成功",console.log("✅ uni.navigateBack 调用成功"),setTimeout(()=>{e.value=""},3e3)}catch(t){e.value="❌ uni.navigateBack 调用失败（查看控制台）",console.error("❌ uni.navigateBack 调用失败:",t),setTimeout(()=>{e.value=""},3e3)}}return k(()=>{}),(n,t)=>(l(),d("div",null,[t[1]||(t[1]=o("h1",null,"商城",-1)),o("div",null," 当前环境："+c(a(r).envInfo?a(B)(a(r).envInfo):"未知"),1),o("div",null,"Token信息："+c(a(r).token||"未登录"),1),o("div",U,[o("div",{style:{display:"flex",gap:"10px","flex-wrap":"wrap","margin-bottom":"10px"}},[o("button",{type:"button",style:{padding:"10px 20px","background-color":"#007aff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"},onClick:v}," 发送测试消息 "),o("button",{type:"button",style:{padding:"10px 20px","background-color":"#34c759",color:"white",border:"none","border-radius":"4px",cursor:"pointer"},onClick:f}," 发送自定义消息 ")]),o("div",A,[a(u)?(l(),d("div",R,c(a(u)),1)):g("",!0),a(s)?(l(),d("div",L,c(a(s)),1)):g("",!0)])]),o("div",C,[t[0]||(t[0]=o("h3",{style:{"margin-bottom":"10px"}},"uni API 测试",-1)),o("div",{style:{display:"flex",gap:"10px","flex-wrap":"wrap","margin-bottom":"10px"}},[o("button",{type:"button",style:{padding:"10px 20px","background-color":"#ff9500",color:"white",border:"none","border-radius":"4px",cursor:"pointer"},onClick:b}," navigateTo "),o("button",{type:"button",style:{padding:"10px 20px","background-color":"#ff3b30",color:"white",border:"none","border-radius":"4px",cursor:"pointer"},onClick:y}," redirectTo "),o("button",{type:"button",style:{padding:"10px 20px","background-color":"#af52de",color:"white",border:"none","border-radius":"4px",cursor:"pointer"},onClick:T}," reLaunch "),o("button",{type:"button",style:{padding:"10px 20px","background-color":"#5856d6",color:"white",border:"none","border-radius":"4px",cursor:"pointer"},onClick:h}," switchTab "),o("button",{type:"button",style:{padding:"10px 20px","background-color":"#007aff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"},onClick:m}," navigateBack ")]),o("div",J,[a(e)?(l(),d("div",I,c(a(e)),1)):g("",!0)])])]))}});export{D as default};
