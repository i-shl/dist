import{d as j,m as A,p as O,G as V,q,r as W,H as G,I as re,Y as fe,x as d,A as Q,y as P,aX as ve,o as U,aE as de,aF as he,aP as ge,aQ as we,B as me,a as C,aM as D,E as K,C as J,K as be,S as R,aj as ye,ay as pe,F as Z,V as Te}from"./index-CPhkr4Pe.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"3a9292ca7a3904f73afa4ca8b96ef6af9893536b"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},h=new e.Error().stack;h&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[h]="738b7c89-fb8f-42f9-ac5a-0b0fa39c3b8c",e._sentryDebugIdIdentifier="sentry-dbid-738b7c89-fb8f-42f9-ac5a-0b0fa39c3b8c")})()}catch{}const[ee,$]=q("swipe"),Se={loop:A,width:V,height:V,vertical:Boolean,autoplay:O(0),duration:O(500),touchable:A,lazyRender:Boolean,initialSwipe:O(0),indicatorColor:String,showIndicators:A,stopPropagation:A},te=Symbol(ee);var xe=j({name:ee,props:Se,emits:["change","dragStart","dragEnd"],setup(e,{emit:h,slots:w}){const u=W(),g=W(),a=G({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let p=!1;const r=re(),{children:m,linkChildren:s}=fe(te),i=d(()=>m.length),o=d(()=>a[e.vertical?"height":"width"]),f=d(()=>e.vertical?r.deltaY.value:r.deltaX.value),y=d(()=>a.rect?(e.vertical?a.rect.height:a.rect.width)-o.value*i.value:0),M=d(()=>o.value?Math.ceil(Math.abs(y.value)/o.value):i.value),k=d(()=>i.value*o.value),T=d(()=>(a.active+i.value)%i.value),Y=d(()=>{const t=e.vertical?"vertical":"horizontal";return r.direction.value===t}),ae=d(()=>{const t={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+a.offset.toFixed(2)}px)`};if(o.value){const l=e.vertical?"height":"width",n=e.vertical?"width":"height";t[l]=`${k.value}px`,t[n]=e[n]?`${e[n]}px`:""}return t}),ie=t=>{const{active:l}=a;return t?e.loop?R(l+t,-1,i.value):R(l+t,0,M.value):l},B=(t,l=0)=>{let n=t*o.value;e.loop||(n=Math.min(n,-y.value));let v=l-n;return e.loop||(v=R(v,y.value,0)),v},b=({pace:t=0,offset:l=0,emitChange:n})=>{if(i.value<=1)return;const{active:v}=a,c=ie(t),I=B(c,l);if(e.loop){if(m[0]&&I!==y.value){const z=I<y.value;m[0].setOffset(z?k.value:0)}if(m[i.value-1]&&I!==0){const z=I>0;m[i.value-1].setOffset(z?-k.value:0)}}a.active=c,a.offset=I,n&&c!==v&&h("change",T.value)},_=()=>{a.swiping=!0,a.active<=-1?b({pace:i.value}):a.active>=i.value&&b({pace:-i.value})},ne=()=>{_(),r.reset(),D(()=>{a.swiping=!1,b({pace:-1,emitChange:!0})})},X=()=>{_(),r.reset(),D(()=>{a.swiping=!1,b({pace:1,emitChange:!0})})};let H;const x=()=>clearTimeout(H),E=()=>{x(),+e.autoplay>0&&i.value>1&&(H=setTimeout(()=>{X(),E()},+e.autoplay))},S=(t=+e.initialSwipe)=>{if(!u.value)return;const l=()=>{var n,v;if(!K(u)){const c={width:u.value.offsetWidth,height:u.value.offsetHeight};a.rect=c,a.width=+((n=e.width)!=null?n:c.width),a.height=+((v=e.height)!=null?v:c.height)}i.value&&(t=Math.min(i.value-1,t),t===-1&&(t=i.value-1)),a.active=t,a.swiping=!0,a.offset=B(t),m.forEach(c=>{c.setOffset(0)}),E()};K(u)?J().then(l):l()},N=()=>S(a.active);let F;const le=t=>{!e.touchable||t.touches.length>1||(r.start(t),p=!1,F=Date.now(),x(),_())},oe=t=>{e.touchable&&a.swiping&&(r.move(t),Y.value&&(!e.loop&&(a.active===0&&f.value>0||a.active===i.value-1&&f.value<0)||(be(t,e.stopPropagation),b({offset:f.value}),p||(h("dragStart",{index:T.value}),p=!0))))},L=()=>{if(!e.touchable||!a.swiping)return;const t=Date.now()-F,l=f.value/t;if((Math.abs(l)>.25||Math.abs(f.value)>o.value/2)&&Y.value){const v=e.vertical?r.offsetY.value:r.offsetX.value;let c=0;e.loop?c=v>0?f.value>0?-1:1:0:c=-Math[f.value>0?"ceil":"floor"](f.value/o.value),b({pace:c,emitChange:!0})}else f.value&&b({pace:0});p=!1,a.swiping=!1,h("dragEnd",{index:T.value}),E()},se=(t,l={})=>{_(),r.reset(),D(()=>{let n;e.loop&&t===i.value?n=a.active===0?0:t:n=t%i.value,l.immediate?D(()=>{a.swiping=!1}):a.swiping=!1,b({pace:n-a.active,emitChange:!0})})},ce=(t,l)=>{const n=l===T.value,v=n?{backgroundColor:e.indicatorColor}:void 0;return C("i",{style:v,class:$("indicator",{active:n})},null)},ue=()=>{if(w.indicator)return w.indicator({active:T.value,total:i.value});if(e.showIndicators&&i.value>1)return C("div",{class:$("indicators",{vertical:e.vertical})},[Array(i.value).fill("").map(ce)])};return Q({prev:ne,next:X,state:a,resize:N,swipeTo:se}),s({size:o,props:e,count:i,activeIndicator:T}),P(()=>e.initialSwipe,t=>S(+t)),P(i,()=>S(a.active)),P(()=>e.autoplay,E),P([ye,pe,()=>e.width,()=>e.height],N),P(ve(),t=>{t==="visible"?E():x()}),U(S),de(()=>S(a.active)),he(()=>S(a.active)),ge(x),we(x),me("touchmove",oe,{target:g}),()=>{var t;return C("div",{ref:u,class:$()},[C("div",{ref:g,style:ae.value,class:$("track",{vertical:e.vertical}),onTouchstartPassive:le,onTouchend:L,onTouchcancel:L},[(t=w.default)==null?void 0:t.call(w)]),ue()])}}});const _e=Z(xe),[Ee,Ie]=q("swipe-item");var Pe=j({name:Ee,setup(e,{slots:h}){let w;const u=G({offset:0,inited:!1,mounted:!1}),{parent:g,index:a}=Te(te);if(!g)return;const p=d(()=>{const s={},{vertical:i}=g.props;return g.size.value&&(s[i?"height":"width"]=`${g.size.value}px`),u.offset&&(s.transform=`translate${i?"Y":"X"}(${u.offset}px)`),s}),r=d(()=>{const{loop:s,lazyRender:i}=g.props;if(!i||w)return!0;if(!u.mounted)return!1;const o=g.activeIndicator.value,f=g.count.value-1,y=o===0&&s?f:o-1,M=o===f&&s?0:o+1;return w=a.value===o||a.value===y||a.value===M,w}),m=s=>{u.offset=s};return U(()=>{J(()=>{u.mounted=!0})}),Q({setOffset:m}),()=>{var s;return C("div",{class:Ie(),style:p.value},[r.value?(s=h.default)==null?void 0:s.call(h):null])}}});const Ae=Z(Pe);export{_e as S,Ae as a};
