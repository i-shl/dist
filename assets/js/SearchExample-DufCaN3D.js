import{d as P,r as b,o as F,i as T,p as _,x as i,a as c,E as J,$ as A,X as $,W as O,s as p,C as M,P as ae,A as S,F as z,y as K,ai as oe,Z as le}from"./index-Dl01RQ6O.js";import{N as ne}from"./index-D7__azfu.js";import"./index-rJ0zoI5p.js";import"./index-Agfgz_aq.js";import{C as se,c as re,R as de,P as ie}from"./index-BlOmRS98.js";import"./index-BqICLX6q.js";import"./index-BOjqb5K1.js";import{F as Y}from"./index-eAYjl05a.js";import{S as ue}from"./index-6tEGXLin.js";import{_ as R}from"./_plugin-vue_export-helper-CbkZt4eH.js";import{B as ce}from"./index-DOrlSKCD.js";import"./use-placeholder-CmJwYh1_.js";import"./use-height-fYRUoBwt.js";import"./use-id-BLwlvdqR.js";import"./use-route-DZOD05gS.js";import"./use-tab-status-D9S_OVoB.js";import"./index-B64wQTeq.js";(function(){try{var u=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};u.SENTRY_RELEASE={id:"dadf989baaa19ca9a7dda97cefda507d3b8f8f5a"}}catch{}})();try{(function(){var u=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},y=new u.Error().stack;y&&(u._sentryDebugIds=u._sentryDebugIds||{},u._sentryDebugIds[y]="8731a460-5d20-4623-9bc5-14c8ff8d15fc",u._sentryDebugIdIdentifier="sentry-dbid-8731a460-5d20-4623-9bc5-14c8ff8d15fc")})()}catch{}const fe={class:"base-date-between"},pe=P({name:"BaseDateBetween",__name:"BaseDateBetween",props:{config:{}},emits:["update","change"],setup(u,{emit:y}){const g=u,C=y,m=b(!1),f=b(["",""]),r=b(!1),o=b(""),k=a=>{if(!a)return"";if(typeof a=="string")return a;if(a instanceof Date){const n=a.getFullYear(),w=String(a.getMonth()+1).padStart(2,"0"),D=String(a.getDate()).padStart(2,"0");return`${n}-${w}-${D}`}return String(a)};F(()=>{const a=g.config;return[a?.field?.[0]||"",a?.field?.[1]||"",a?.default?.[0]||"",a?.default?.[1]||""]},([a,n,w,D])=>{const B=`${a}__${n}`;if(o.value&&o.value!==B&&(r.value=!1,f.value=["",""]),o.value=B,r.value)return;r.value=!0;const h=[k(w),k(D)];f.value=h,((h[0]||"")!==""||(h[1]||"")!=="")&&N(h)},{immediate:!0});const V=T(()=>{const[a,n]=f.value;return!a&&!n?"请选择日期范围":a&&!n?`${a} 至`:!a&&n?`至 ${n}`:`${a} 至 ${n}`}),N=a=>{const n=g.config;!n?.field||!Array.isArray(n.field)||(C("update",{field:n.field[0],value:a[0]||""}),C("update",{field:n.field[1],value:a[1]||""}),C("change",a))},I=a=>{const n=[k(a?.[0]),k(a?.[1])];f.value=n,m.value=!1,N(n)};return(a,n)=>{const w=Y,D=se;return i(),_("div",fe,[c(w,{readonly:"","is-link":"",label:u.config.title||"日期范围","model-value":V.value,placeholder:"请选择日期范围",onClick:n[0]||(n[0]=B=>m.value=!0)},null,8,["label","model-value"]),c(D,{show:m.value,"onUpdate:show":n[1]||(n[1]=B=>m.value=B),type:"range","allow-same-day":!0,onConfirm:I},null,8,["show"])])}}}),me=R(pe,[["__scopeId","data-v-5cc0a5bc"]]),ve={class:"base-search"},ye={key:0,class:"search-row"},he={class:"input-col"},_e={key:0,class:"button-group"},be={class:"desc-row"},ge={key:0,class:"desc"},ke={key:1,class:"button-group"},we={class:"more-body"},Se={class:"more-footer"},$e=P({name:"BaseSearch",__name:"BaseSearch",props:{config:{default:void 0},desc:{default:""},showmorebutton:{type:[Boolean,String],default:!1}},emits:["update","search"],setup(u,{emit:y}){const g=u,C=y,m=b(!1),f=b(!0),r=b({header:null,more:[]}),o=J({}),k=b({}),V=b({}),N=T(()=>typeof g.showmorebutton=="string"?g.showmorebutton==="true":!!g.showmorebutton),I=T(()=>!!r.value.more?.length),a=e=>JSON.parse(JSON.stringify(e)),n=e=>{Object.keys(o).forEach(s=>delete o[s]);const t={};if(e.header?.field){const s=e.header.default!==void 0?e.header.default:"";t[e.header.field]=s,o[e.header.field]=s}return Array.isArray(e.more)&&e.more.forEach(s=>{if(!s)return;if(s.type==="date-between"&&Array.isArray(s.field)){const U=s.default||["",""];t[s.field[0]]=U[0]??"",t[s.field[1]]=U[1]??"",o[s.field[0]]=U[0]??"",o[s.field[1]]=U[1]??"";return}const d=s.field;if(!d)return;const E=s.default!==void 0?s.default:"";t[d]=E,o[d]=E}),a(o)},w=()=>{const e=a(o);C("update",e),C("search",e)},D=()=>{const e=a(k.value);Object.keys(o).forEach(t=>delete o[t]),Object.assign(o,e),V.value=a(e),m.value=!1,h()},B=e=>{Object.keys(o).forEach(t=>delete o[t]),Object.assign(o,a(V.value)),m.value=e},h=()=>{V.value=a(o),w(),m.value=!1},j=()=>{const e=a(k.value);Object.keys(o).forEach(t=>delete o[t]),Object.assign(o,e),V.value=a(e),w(),m.value=!1},q=e=>{e?.field&&(o[e.field]=e.value)},G=e=>e.type!=="date-between"?{field:["",""],default:["",""],title:""}:{field:e.field,default:e.default||["",""],title:e.name},v=J({show:!1,field:"",title:"",options:[],tempValue:void 0}),H=e=>(e||[]).map(t=>({text:t.name,value:t.value})),W=e=>{const t=o[e.field];return e.data?.find(d=>d.value===t)?.name??""},X=e=>{v.field=e.field,v.title=e.name,v.options=H(e.data||[]),v.tempValue=o[e.field],v.show=!0},Z=e=>{const t=e?.selectedValues,s=Array.isArray(t)?t[0]:void 0;v.field&&(o[v.field]=s),v.show=!1};return F(()=>g.config,e=>{e&&typeof e=="object"&&(r.value=a(e),f.value=!0)},{deep:!0,immediate:!0}),F(()=>r.value,e=>{const t=!!e?.header?.field,s=Array.isArray(e?.more)&&e.more.length>0;if(!(!t&&!s)&&f.value){n(e);const d=a(o);k.value=d,V.value=d,queueMicrotask(()=>w()),f.value=!1}},{deep:!0,immediate:!0}),(e,t)=>{const s=ue,d=ce,E=Y,U=de,Q=re,L=ae,ee=ie;return i(),_("div",ve,[r.value.header?(i(),_("div",ye,[$("div",he,[c(s,{modelValue:o[r.value.header.field],"onUpdate:modelValue":t[0]||(t[0]=l=>o[r.value.header.field]=l),placeholder:r.value.header.placeholder,clearable:"",onSearch:h,onClear:D},null,8,["modelValue","placeholder"])]),N.value?(i(),_("div",_e,[I.value?(i(),O(d,{key:0,size:"small",type:"primary",plain:"",onClick:t[1]||(t[1]=l=>B(!0))},{default:p(()=>[...t[6]||(t[6]=[S(" 更多 ",-1)])]),_:1})):A("",!0),c(d,{size:"small",onClick:j},{default:p(()=>[...t[7]||(t[7]=[S("重置",-1)])]),_:1}),c(d,{size:"small",type:"primary",onClick:h},{default:p(()=>[...t[8]||(t[8]=[S("检索",-1)])]),_:1})])):A("",!0)])):A("",!0),$("div",be,[u.desc?(i(),_("div",ge,M(u.desc),1)):A("",!0),N.value?A("",!0):(i(),_("div",ke,[I.value?(i(),O(d,{key:0,size:"small",type:"primary",onClick:t[2]||(t[2]=l=>B(!0))},{default:p(()=>[...t[9]||(t[9]=[S(" 更多 ",-1)])]),_:1})):A("",!0),c(d,{size:"small",onClick:j},{default:p(()=>[...t[10]||(t[10]=[S("重置",-1)])]),_:1}),c(d,{size:"small",type:"primary",onClick:h},{default:p(()=>[...t[11]||(t[11]=[S("检索",-1)])]),_:1})]))]),c(L,{show:m.value,"onUpdate:show":t[3]||(t[3]=l=>m.value=l),position:"bottom",round:""},{default:p(()=>[t[14]||(t[14]=$("div",{class:"more-header"},"更多",-1)),$("div",we,[(i(!0),_(z,null,K(r.value.more,(l,te)=>(i(),_(z,{key:te},[l.type==="text"?(i(),O(E,{key:0,label:l.name},{input:p(()=>[c(E,{modelValue:o[l.field],"onUpdate:modelValue":x=>o[l.field]=x,placeholder:l.placeholder,clearable:"",border:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])):l.type==="radio-group"?(i(),O(E,{key:1,label:l.name},{input:p(()=>[c(Q,{modelValue:o[l.field],"onUpdate:modelValue":x=>o[l.field]=x,direction:"horizontal"},{default:p(()=>[(i(!0),_(z,null,K(l.data,x=>(i(),O(U,{key:String(x.value),name:x.value,style:{"margin-right":"12px","margin-bottom":"6px"}},{default:p(()=>[S(M(x.name),1)]),_:2},1032,["name"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])):l.type==="select"?(i(),O(E,{key:2,label:l.name,"is-link":"",readonly:"","model-value":W(l),placeholder:l.placeholder||"请选择",onClick:x=>X(l)},null,8,["label","model-value","placeholder","onClick"])):l.type==="date-between"?(i(),O(me,{key:3,config:G(l),onUpdate:q},null,8,["config"])):A("",!0)],64))),128))]),$("div",Se,[c(d,{block:"",onClick:j},{default:p(()=>[...t[12]||(t[12]=[S("重置",-1)])]),_:1}),c(d,{block:"",type:"primary",style:{"margin-top":"10px"},onClick:h},{default:p(()=>[...t[13]||(t[13]=[S("检索",-1)])]),_:1}),oe(e.$slots,"footer_slot",{},void 0,!0)])]),_:3},8,["show"]),c(L,{show:v.show,"onUpdate:show":t[5]||(t[5]=l=>v.show=l),position:"bottom",round:""},{default:p(()=>[c(ee,{title:v.title,columns:v.options,onCancel:t[4]||(t[4]=l=>v.show=!1),onConfirm:Z},null,8,["title","columns"])]),_:1},8,["show"])])}}}),Ce=R($e,[["__scopeId","data-v-fe2865dc"]]),Be={class:"page"},xe={class:"content"},Ve={class:"card"},De={class:"pre"},Ee=P({name:"SearchExample",__name:"SearchExample",setup(u){const y=b({}),g={header:{field:"keyword",default:"",placeholder:"门店名称/地址"},more:[{type:"text",name:"门店检索",field:"keyword",default:"",placeholder:"门店名称/地址"},{type:"radio-group",name:"店铺状态",field:"close",default:0,data:[{value:0,name:"全部"},{value:1,name:"正常"},{value:2,name:"撤店"}]},{type:"select",name:"审核状态",field:"check_status",default:0,placeholder:"请选择",data:[{value:0,name:"全部"},{value:1,name:"待审核"},{value:2,name:"已通过"},{value:3,name:"已驳回"}]},{type:"date-between",name:"创建时间",field:["start_date","end_date"],default:["",""],title:"创建时间"}]},C=f=>{y.value=f},m=f=>{y.value=f,le(`search: ${JSON.stringify(f)}`)};return(f,r)=>{const o=ne;return i(),_("div",Be,[c(o,{title:"搜索组件","left-arrow":"",onClickLeft:r[0]||(r[0]=k=>f.$router.back())}),c(Ce,{config:g,desc:"示例：配置驱动的列表搜索",onUpdate:C,onSearch:m}),$("div",xe,[$("div",Ve,[r[1]||(r[1]=$("div",{class:"title"},"当前参数",-1)),$("pre",De,M(JSON.stringify(y.value,null,2)),1)])])])}}}),Ge=R(Ee,[["__scopeId","data-v-f346b25c"]]);export{Ge as default};
