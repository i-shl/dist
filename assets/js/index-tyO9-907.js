import{d as T,t as A,c as U,r as B,u as Q,a as n,w as R,e as x,h as X,i as S,D as Z,E as j,G as ee,l as L,H as te,J as ne,K as oe,P as z,L as ae,M as se,N as le,n as re,O as $,b as ie,Q as ce,R as ue,S as de,T as fe,U as me,V as we,W as M,s as y,x as F,X as P,A as pe,Y as he,Z as k,_ as ge,p as be,$ as ve,z as Be}from"./index-BB40URPS.js";import{C as W}from"./index-C_uem6QQ.js";import{C as ye}from"./index-SOwn92tM.js";import{F as _e}from"./index-Clp5gGc4.js";import{B as I}from"./index-Dr1M9peL.js";import{F as Ce}from"./index-BhjfJed_.js";import{_ as Y}from"./_plugin-vue_export-helper-CEDRTg0d.js";import{u as Pe}from"./use-placeholder-B3fxReaF.js";import{u as ke,r as Se}from"./use-route-Dff6YpaV.js";import"./use-id-Y725sWSX.js";import"./use-height-DR2S3_z2.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"feac73d359e7bcd07886c4d68a714e6ac6d56310"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="f9ec5cbc-faf4-4a79-a398-6ada443cfb5f",e._sentryDebugIdIdentifier="sentry-dbid-f9ec5cbc-faf4-4a79-a398-6ada443cfb5f")})()}catch{}const[q,H]=U("action-bar"),G=Symbol(q),Te={placeholder:Boolean,safeAreaInsetBottom:A};var xe=T({name:q,props:Te,setup(e,{slots:a}){const s=B(),l=Pe(s,H),{linkChildren:o}=Q(G);o();const d=()=>{var m;return n("div",{ref:s,class:[H(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(m=a.default)==null?void 0:m.call(a)])};return()=>e.placeholder?l(d):d()}});const De=R(xe),[Ee,Oe]=U("action-bar-button"),Ae=x({},Se,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ie=T({name:Ee,props:Ae,setup(e,{slots:a}){const s=ke(),{parent:l,index:o}=X(G),d=S(()=>{if(l){const r=l.children[o.value-1];return!(r&&"isButton"in r)}}),m=S(()=>{if(l){const r=l.children[o.value+1];return!(r&&"isButton"in r)}});return Z({isButton:!0}),()=>{const{type:r,icon:h,text:f,color:i,loading:g,disabled:v}=e;return n(I,{class:Oe([r,{last:m.value,first:d.value}]),size:"large",type:r,icon:h,color:i,loading:g,disabled:v,onClick:s},{default:()=>[a.default?a.default():f]})}}});const K=R(Ie),[Ve,w,O]=U("dialog"),Fe=x({},ae,{title:String,theme:String,width:re,message:[String,Function],callback:Function,allowHtml:Boolean,className:le,transition:se("van-dialog-bounce"),messageAlign:String,closeOnPopstate:A,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:A,closeOnClickOverlay:Boolean,keyboardEnabled:A,destroyOnClose:Boolean}),Ne=[...ne,"transition","closeOnPopstate","destroyOnClose"];var J=T({name:Ve,props:Fe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:a,slots:s}){const l=B(),o=j({confirm:!1,cancel:!1}),d=t=>a("update:show",t),m=t=>{var c;d(!1),(c=e.callback)==null||c.call(e,t)},r=t=>()=>{e.show&&(a(t),e.beforeClose?(o[t]=!0,ie(e.beforeClose,{args:[t],done(){m(t),o[t]=!1},canceled(){o[t]=!1}})):m(t))},h=r("cancel"),f=r("confirm"),i=ee(t=>{var c,p;if(!e.keyboardEnabled||t.target!==((p=(c=l.value)==null?void 0:c.popupRef)==null?void 0:p.value))return;({Enter:e.showConfirmButton?f:$,Escape:e.showCancelButton?h:$})[t.key](),a("keydown",t)},["enter","esc"]),g=()=>{const t=s.title?s.title():e.title;if(t)return n("div",{class:w("header",{isolated:!e.message&&!s.default})},[t])},v=t=>{const{message:c,allowHtml:p,messageAlign:b}=e,E=w("message",{"has-title":t,[b]:b}),V=ce(c)?c():c;return p&&typeof V=="string"?n("div",{class:E,innerHTML:V},null):n("div",{class:E},[V])},_=()=>{if(s.default)return n("div",{class:w("content")},[s.default()]);const{title:t,message:c,allowHtml:p}=e;if(c){const b=!!(t||s.title);return n("div",{key:p?1:0,class:w("content",{isolated:!b})},[v(b)])}},C=()=>n("div",{class:[de,w("footer")]},[e.showCancelButton&&n(I,{size:"large",text:e.cancelButtonText||O("cancel"),class:w("cancel"),style:{color:e.cancelButtonColor},loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&n(I,{size:"large",text:e.confirmButtonText||O("confirm"),class:[w("confirm"),{[ue]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:f},null)]),D=()=>n(De,{class:w("footer")},{default:()=>[e.showCancelButton&&n(K,{type:"warning",text:e.cancelButtonText||O("cancel"),class:w("cancel"),color:e.cancelButtonColor,loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&n(K,{type:"danger",text:e.confirmButtonText||O("confirm"),class:w("confirm"),color:e.confirmButtonColor,loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:f},null)]}),u=()=>s.footer?s.footer():e.theme==="round-button"?D():C();return()=>{const{width:t,title:c,theme:p,message:b,className:E}=e;return n(z,L({ref:l,role:"dialog",class:[w([p]),E],style:{width:oe(t)},tabindex:0,"aria-labelledby":c||b,onKeydown:i,"onUpdate:show":d},te(e,Ne)),{default:()=>[g(),_(),u()]})}}});let N;const Ue={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let Re=x({},Ue);function $e(){({instance:N}=me({setup(){const{state:a,toggle:s}=we();return()=>n(J,L(a,{"onUpdate:show":s}),null)}}))}function He(e){return fe?new Promise((a,s)=>{N||$e(),N.open(x({},Re,e,{callback:l=>{(l==="confirm"?a:s)(l)}}))}):Promise.resolve(void 0)}const Ke=e=>He(x({showCancelButton:!0},e));R(J);const Le={class:"update-password-container"},ze={class:"content"},Me={class:"submit-btn-wrapper"},We=T({__name:"UpdatePasswordDialog",props:{show:{type:Boolean}},emits:["update:show"],setup(e,{emit:a}){const s=e,l=a,o=B({newPassword:"",confirmPassword:""}),d=S({get:()=>s.show,set:f=>l("update:show",f)}),m=()=>o.value.newPassword?o.value.newPassword.length<6?(k("新密码长度不能少于6位"),!1):o.value.newPassword!==o.value.confirmPassword?(k("两次输入的新密码不一致"),!1):!0:(k("请输入新密码"),!1),r=async()=>{if(m())try{await new Promise(f=>setTimeout(f,500)),he("密码更新成功"),o.value={newPassword:"",confirmPassword:""},d.value=!1}catch(f){k(f.message||"密码更新失败，请重试")}},h=()=>{o.value={newPassword:"",confirmPassword:""}};return(f,i)=>{const g=_e,v=W,_=I,C=Ce,D=z;return F(),M(D,{show:d.value,"onUpdate:show":i[2]||(i[2]=u=>d.value=u),position:"right",style:{width:"100%",height:"100%"},closeable:"","close-icon-position":"top-right",onClose:h},{default:y(()=>[P("div",Le,[i[4]||(i[4]=P("div",{class:"header"},[P("h2",{class:"title"},"更新密码")],-1)),P("div",ze,[n(C,{onSubmit:r},{default:y(()=>[n(v,null,{default:y(()=>[n(g,{modelValue:o.value.newPassword,"onUpdate:modelValue":i[0]||(i[0]=u=>o.value.newPassword=u),type:"password",name:"newPassword",label:"新密码",placeholder:"请输入新密码",rules:[{required:!0,message:"请输入新密码"},{validator:u=>!u||u.length>=6,message:"密码长度不能少于6位"}]},null,8,["modelValue","rules"]),n(g,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":i[1]||(i[1]=u=>o.value.confirmPassword=u),type:"password",name:"confirmPassword",label:"确认密码",placeholder:"请再次输入新密码",rules:[{required:!0,message:"请再次输入新密码"},{validator:u=>u===o.value.newPassword,message:"两次输入的新密码不一致"}]},null,8,["modelValue","rules"])]),_:1}),P("div",Me,[n(_,{block:"",type:"primary","native-type":"submit"},{default:y(()=>[...i[3]||(i[3]=[pe(" 更新密码 ",-1)])]),_:1})])]),_:1})])])]),_:1},8,["show"])}}}),Ye=Y(We,[["__scopeId","data-v-876287bf"]]),qe={class:"mine-tab-container"},Ge=T({__name:"index",setup(e){const a=Be(),s=ge(),l=S(()=>s.userType),o=B("17600690198"),d=B("400-666-0880"),m=B("V9.9.9"),r=B(!1),h=S(()=>l.value==="agent"||l.value==="staff"),f=()=>{a.push("/mine/system-settings")},i=()=>{a.push("/mine/update-log")},g=()=>{a.push("/mine/feedback")},v=()=>{window.location.href=`tel:${d.value}`},_=()=>{r.value=!0},C=async()=>{try{await Ke({title:"退出登录",message:"确定要退出登录吗？"}),s.clearAuth(),a.push("/login"),k("已退出登录")}catch{}};return(D,u)=>{const t=ye,c=W;return F(),be("div",qe,[h.value?(F(),M(c,{key:0,inset:""},{default:y(()=>[n(t,{title:"系统设置","is-link":"",onClick:f})]),_:1})):ve("",!0),n(c,{inset:""},{default:y(()=>[n(t,{title:"当前版本",label:m.value,"is-link":"",onClick:i},null,8,["label"]),n(t,{title:"意见反馈",label:"帮助我们改进","is-link":"",onClick:g}),n(t,{title:"客服电话",label:d.value,onClick:v},null,8,["label"]),n(t,{title:"当前帐号",label:o.value},null,8,["label"]),n(t,{title:"更新密码",label:"修改登录密码","is-link":"",onClick:_}),n(t,{title:"退出登录",label:"安全退出当前账号","is-link":"",onClick:C})]),_:1}),n(Ye,{show:r.value,"onUpdate:show":u[0]||(u[0]=p=>r.value=p)},null,8,["show"])])}}}),lt=Y(Ge,[["__scopeId","data-v-c024eb94"]]);export{lt as default};
