import{d as T,G as A,m as V,n as X,p as Z,q as U,r as k,Y as Q,v as ee,x as N,R as te,A as H,ax as oe,B as ne,a as i,D as J,ay as ae,X as se,a5 as W,U as le,H as M,V as re,az as ie,aA as ce,aB as de,an as ue,ao as fe,af as pe,a1 as ve,ac as me,F as Y,c as F,f as B,w as E,N as ge,O as he,P as ye,M as be,au as we,b as h,t as Ce,i as L,ah as z}from"./index-CPhkr4Pe.js";import{S as ke}from"./index-Da1tENLS.js";import{N as _e}from"./index-B8diGhUx.js";import{C as xe}from"./index-0BjzaYNX.js";import{u as Oe}from"./use-id-B0TxtryC.js";import{_ as G}from"./_plugin-vue_export-helper-BM5uEb7X.js";import{B as Pe}from"./index-CmK3HOlw.js";import"./use-placeholder-2GXY53DY.js";import"./use-route-CM-qhGoy.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"3a9292ca7a3904f73afa4ca8b96ef6af9893536b"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new e.Error().stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="97ef0723-1fec-4e22-b708-8088533887f8",e._sentryDebugIdIdentifier="sentry-dbid-97ef0723-1fec-4e22-b708-8088533887f8")})()}catch{}const[K,S]=U("dropdown-menu"),Ie={overlay:V,zIndex:A,duration:Z(.2),direction:X("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:V,closeOnClickOverlay:V,swipeThreshold:A},j=Symbol(K);var Se=T({name:K,props:Ie,setup(e,{slots:l}){const d=Oe(),g=k(),o=k(),f=k(0),{children:n,linkChildren:y}=Q(j),a=ee(g),s=N(()=>n.some(t=>t.state.showWrapper)),b=N(()=>e.swipeThreshold&&n.length>+e.swipeThreshold),r=N(()=>{if(s.value&&te(e.zIndex))return{zIndex:+e.zIndex+1}}),m=()=>{n.forEach(t=>{t.toggle(!1)})},_=()=>{e.closeOnClickOutside&&m()},x=()=>{if(o.value){const t=J(o);e.direction==="down"?f.value=t.bottom:f.value=ae.value-t.top}},u=()=>{s.value&&x()},w=t=>{n.forEach((c,p)=>{p===t?c.toggle():c.state.showPopup&&c.toggle(!1,{immediate:!0})})},I=(t,c)=>{const{showPopup:p}=t.state,{disabled:v,titleClass:O}=t;return i("div",{id:`${d}-${c}`,role:"button",tabindex:v?void 0:0,"data-allow-mismatch":"attribute",class:[S("item",{disabled:v,grow:b.value}),{[se]:!v}],onClick:()=>{v||w(c)}},[i("span",{class:[S("title",{down:p===(e.direction==="down"),active:p}),O],style:{color:p?e.activeColor:""}},[i("div",{class:"van-ellipsis"},[t.renderTitle()])])])};return H({close:m,opened:s}),y({id:d,props:e,offset:f,opened:s,updateOffset:x}),oe(g,_),ne("scroll",u,{target:a,passive:!0}),()=>{var t;return i("div",{ref:g,class:S()},[i("div",{ref:o,style:r.value,class:S("bar",{opened:s.value,scrollable:b.value})},[n.map(I)]),(t=l.default)==null?void 0:t.call(l)])}}});const[$e,$]=U("dropdown-item"),Ve={title:String,options:le(),disabled:Boolean,teleport:[String,Object],lazyRender:V,modelValue:W,titleClass:W};var Be=T({name:$e,inheritAttrs:!1,props:Ve,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:l,slots:d,attrs:g}){const o=M({showPopup:!1,transition:!0,showWrapper:!1}),f=k(),{parent:n,index:y}=re(j);if(!n)return;const a=t=>()=>l(t),s=a("open"),b=a("close"),r=a("opened"),m=()=>{o.showWrapper=!1,l("closed")},_=t=>{e.teleport&&t.stopPropagation()},x=(t=!o.showPopup,c={})=>{t!==o.showPopup&&(o.showPopup=t,o.transition=!c.immediate,t&&(n.updateOffset(),o.showWrapper=!0))},u=()=>{if(d.title)return d.title();if(e.title)return e.title;const t=e.options.find(c=>c.value===e.modelValue);return t?t.text:""},w=t=>{const{activeColor:c}=n.props,{disabled:p}=t,v=t.value===e.modelValue,O=()=>{p||(o.showPopup=!1,t.value!==e.modelValue&&(l("update:modelValue",t.value),l("change",t.value)))},P=()=>{if(v)return i(me,{class:$("icon"),color:p?void 0:c,name:"success"},null)};return i(xe,{role:"menuitem",key:String(t.value),icon:t.icon,title:t.text,class:$("option",{active:v,disabled:p}),style:{color:v?c:""},tabindex:v?0:-1,clickable:!p,onClick:O},{value:P})},I=()=>{const{offset:t}=n,{autoLocate:c,zIndex:p,overlay:v,duration:O,direction:P,closeOnClickOverlay:q}=n.props,R=ce(p);let D=t.value;if(c&&f.value){const C=de(f.value);C&&(D-=J(C).top)}return P==="down"?R.top=`${D}px`:R.bottom=`${D}px`,ue(i("div",ve({ref:f,style:R,class:$([P]),onClick:_},g),[i(pe,{show:o.showPopup,"onUpdate:show":C=>o.showPopup=C,role:"menu",class:$("content"),overlay:v,overlayProps:{duration:o.transition&&!n.opened.value?O:0},position:P==="down"?"top":"bottom",duration:o.transition?O:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${n.id}-${y.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:q,onOpen:s,onClose:b,onOpened:r,onClosed:m},{default:()=>{var C;return[e.options.map(w),(C=d.default)==null?void 0:C.call(d)]}})]),[[fe,o.showWrapper]])};return H({state:o,toggle:x,renderTitle:u}),()=>e.teleport?i(ie,{to:e.teleport},{default:()=>[I()]}):I()}});const Ee=Y(Be),Te=Y(Se),Re={class:"base-filter"},De=T({name:"BaseFilter",__name:"BaseFilter",props:{items:{},activeColor:{default:"#1989fa"},backgroundColor:{default:"var(--app-card-bg-color)"},closeOnClickOverlay:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0}},emits:["change","itemChange"],setup(e,{expose:l,emit:d}){const g=e,o=d,f=k(),n=M({}),y=()=>{g.items.forEach(r=>{r.value!==void 0?n[r.name]=r.value:r.options&&r.options.length>0&&(n[r.name]=r.options[0]?.value)})};y();const a=(r,m)=>{o("itemChange",r,m),o("change",{...n})};return l({getValues:()=>({...n}),reset:()=>{y(),o("change",{...n})},menuRef:f}),(r,m)=>{const _=Ee,x=Te;return B(),F("div",Re,[i(x,{ref_key:"menuRef",ref:f,"active-color":e.activeColor,background:e.backgroundColor,"close-on-click-overlay":e.closeOnClickOverlay,"close-on-click-outside":e.closeOnClickOutside},{default:E(()=>[(B(!0),F(he,null,ye(e.items,u=>(B(),be(_,{key:u.name,modelValue:n[u.name],"onUpdate:modelValue":w=>n[u.name]=w,title:u.title,options:u.options,disabled:u.disabled,"title-class":u.titleClass,class:we(u.optionsClass),onChange:w=>a(u.name,w)},null,8,["modelValue","onUpdate:modelValue","title","options","disabled","title-class","class","onChange"]))),128)),ge(r.$slots,"default",{},void 0,!0)]),_:3},8,["active-color","background","close-on-click-overlay","close-on-click-outside"])])}}}),Ne=G(De,[["__scopeId","data-v-8bf2e729"]]),ze={class:"filter-example-container"},Fe={class:"content-area"},Ae={class:"result-box"},We={class:"actions"},Le=T({__name:"FilterExample",setup(e){const l=k(),d=k("当前列表内容：全部数据"),g=[{name:"type",title:"商品类型",options:[{text:"全部商品",value:""},{text:"新款商品",value:"new"},{text:"活动商品",value:"activity"}]},{name:"sort",title:"默认排序",options:[{text:"默认排序",value:"default"},{text:"好评排序",value:"score"},{text:"销量排序",value:"sales"}]},{name:"status",title:"状态",value:0,options:[{text:"上架",value:1},{text:"下架",value:0}]}],o=a=>{console.log("筛选条件变化:",a),z(`请求参数: ${JSON.stringify(a)}`),d.value=`正在加载 ${JSON.stringify(a)} 对应的数据...`,setTimeout(()=>{d.value=`加载完成！当前展示条件：
类型: ${a.type||"全部"}
排序: ${a.sort}
状态: ${a.status===1?"上架":"下架"}`},500)},f=(a,s)=>{console.log(`字段 ${a} 变更为:`,s)},n=()=>{const a=l.value?.getValues();z(JSON.stringify(a))},y=()=>{l.value?.reset(),z("已重置")};return(a,s)=>{const b=_e,r=ke,m=Pe;return B(),F("div",ze,[i(b,{title:"筛选组件示例","left-arrow":"",onClickLeft:s[0]||(s[0]=_=>a.$router.back())}),i(r,{"offset-top":0},{default:E(()=>[i(Ne,{ref_key:"filterRef",ref:l,items:g,onChange:o,onItemChange:f},null,512)]),_:1}),h("div",Fe,[h("div",Ae,[h("pre",null,Ce(d.value),1)]),h("div",We,[i(m,{block:"",type:"primary",size:"small",onClick:n},{default:E(()=>[...s[1]||(s[1]=[L(" 获取当前筛选值 ",-1)])]),_:1}),i(m,{block:"",size:"small",onClick:y},{default:E(()=>[...s[2]||(s[2]=[L(" 重置筛选 ",-1)])]),_:1})]),s[3]||(s[3]=h("div",{class:"tip"},[h("p",null,"提示："),h("p",null,"1. 筛选组件默认吸顶展示。"),h("p",null,'2. "商品类型"和"默认排序"有默认选中项。'),h("p",null,'3. "状态"我们设置了默认值为 0 (下架)。')],-1))])])}}}),Xe=G(Le,[["__scopeId","data-v-be886fb6"]]);export{Xe as default};
