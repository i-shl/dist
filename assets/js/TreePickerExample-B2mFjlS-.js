import{d as V,r as T,E as q,i as $,o as K,p as r,a as w,P as G,au as s,s as z,x as h,X as o,C as L,F as H,y as J,a3 as P,b7 as R,$ as O,Z as Q,A as W}from"./index-Dl01RQ6O.js";import{C as ee}from"./index-BOjqb5K1.js";import{N as ne}from"./index-D7__azfu.js";import{_ as F}from"./_plugin-vue_export-helper-CbkZt4eH.js";import{B as te}from"./index-DOrlSKCD.js";import"./use-route-DZOD05gS.js";import"./use-placeholder-CmJwYh1_.js";import"./use-height-fYRUoBwt.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};l.SENTRY_RELEASE={id:"dadf989baaa19ca9a7dda97cefda507d3b8f8f5a"}}catch{}})();try{(function(){var l=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},f=new l.Error().stack;f&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[f]="2ff10f4e-f412-41d4-9fbc-ffc5bda6645b",l._sentryDebugIdIdentifier="sentry-dbid-2ff10f4e-f412-41d4-9fbc-ffc5bda6645b")})()}catch{}const le={class:"tree-picker"},ie={class:"tree-bar"},ae={class:"tree-view"},ce={class:"tree-list"},de={class:"item-label"},oe=["onClick"],se=["onClick"],re={class:"item-name"},he={key:0,class:"item-check"},ue=V({name:"BaseTreePicker",__name:"BaseTreePicker",props:{valueKey:{default:"id"},textKey:{default:"name"},childrenKey:{default:"children"},localdata:{default:()=>[]},localTreeList:{default:()=>[]},selectedData:{default:()=>[]},title:{default:""},multiple:{type:Boolean,default:!0},selectParent:{type:Boolean,default:!0},border:{type:Boolean,default:!1},confirmColor:{default:"#1989fa"},cancelColor:{default:"#666"},titleColor:{default:"#1f1f1f"},switchColor:{default:"#666"},height:{default:"80vh"}},emits:["select-change","cancel"],setup(l,{expose:f,emit:y}){const c=l,S=y,v=T(!1),d=q([]),p=$(()=>({color:c.titleColor})),m=$(()=>({color:c.cancelColor})),I=$(()=>({color:c.confirmColor})),g=()=>{v.value=!0},k=()=>{v.value=!1},x=()=>{k(),S("cancel")},D=()=>{if(!c.multiple)return;const e=[];let a="",i=-1;d.forEach(n=>{i>=0&&n.level>i||(n.checkStatus===2?(i=n.level,e.push(n.id),a=a?`${a} / ${n.name}`:n.name):i=-1)}),k(),S("select-change",e,a||void 0)},j=e=>d.findIndex(a=>a.id===e),N=(e=[],a=0,i,n=!0)=>{let t=0,u=-1,_=0;i&&(t=j(i.id)+1,u=i.id,_=c.multiple&&i.checkStatus===2?2:0),e.forEach(E=>{const b=E?.[c.childrenKey],Z=!(Array.isArray(b)&&b.length>0),C={id:E?.[c.valueKey],name:String(E?.[c.textKey]??""),level:a,isLastLevel:Z,isShow:n,isShowChild:!1,checkStatus:_,orCheckStatus:0,parentId:u,children:b,childCount:Array.isArray(b)?b.length:0,childCheckCount:0,childCheckPCount:0};c.selectedData.includes(C.id)&&(C.checkStatus=2,C.orCheckStatus=2,C.childCheckCount=C.children?C.children.length:0,B(C)),d.splice(t,0,C),t++})},M=(e,a)=>{const i=a+1;if(!(i<=0))for(let n=i;n<d.length;n++){const t=d[n];if(t)if(t.level>e.level)e.isShowChild?t.parentId===e.id&&(t.isShow=e.isShowChild,t.isShow||(t.isShowChild=!1)):(t.isShow=e.isShowChild,t.isShowChild=!1);else return}},U=(e,a)=>{e.isLastLevel||(e.isShowChild=!e.isShowChild,e.children?(N(e.children,e.level+1,e),e.children=void 0):M(e,a))},X=(e,a)=>{if(!e.childCount||e.childCount<=0)return;let i=a+1;for(;i<d.length&&(d[i]?.level??-1)>e.level;){const n=d[i];if(!n){i++;continue}n.checkStatus=e.checkStatus,n.checkStatus===2?(n.childCheckCount=n.childCount,n.childCheckPCount=0):n.checkStatus===0&&(n.childCheckCount=0,n.childCheckPCount=0),i++}},B=(e,a,i)=>{const n=d.findIndex(_=>_.id===e.parentId);if(n<0)return;const t=d[n];if(!t)return;const u=t.checkStatus;i===1?t.childCheckPCount-=1:i===2&&(t.childCheckCount-=1),e.checkStatus===1?t.childCheckPCount+=1:e.checkStatus===2&&(t.childCheckCount+=1),t.childCheckCount<=0&&t.childCheckPCount<=0?(t.childCheckCount=0,t.childCheckPCount=0,t.checkStatus=0):t.childCheckCount>=t.childCount?(t.childCheckCount=t.childCount,t.childCheckPCount=0,t.checkStatus=2):t.checkStatus=1,B(t,n,u)},Y=(e,a)=>{if(!c.selectParent&&!e.isLastLevel){Q("请选择末级节点");return}if(!c.multiple){e.checkStatus=e.checkStatus===0?2:0,d.forEach((n,t)=>{const u=d[t];u&&(u.checkStatus=t===a?2:0)}),k(),S("select-change",[e.id],e.name||void 0);return}const i=e.checkStatus;i===0?(e.checkStatus=2,e.childCheckCount=e.childCount,e.childCheckPCount=0):(e.checkStatus=0,e.childCheckCount=0,e.childCheckPCount=0),X(e,a),B(e,a,i)},A=()=>{if(d.splice(0,d.length),c.localTreeList&&c.localTreeList.length>0){d.push(...c.localTreeList);return}N(c.localdata)};return K(()=>c.localdata,()=>A(),{deep:!0,immediate:!0}),K(()=>c.localTreeList,e=>{e&&e.length>0&&A()},{deep:!0}),f({show:g,hide:k,_show:g,_hide:k,confirm:D,cancel:x,treeList:d}),(e,a)=>{const i=G;return h(),r("div",le,[w(i,{show:v.value,"onUpdate:show":a[0]||(a[0]=n=>v.value=n),position:"bottom",round:"",style:s({height:l.height}),"close-on-click-overlay":!0,teleport:"body"},{default:z(()=>[o("div",ie,[o("div",{class:"tree-bar-cancel",style:s(m.value),onClick:x}," 取消 ",4),o("div",{class:"tree-bar-title",style:s(p.value)},L(l.title),5),o("div",{class:"tree-bar-confirm",style:s(I.value),onClick:D},L(l.multiple?"确定":""),5)]),o("div",ae,[o("div",ce,[(h(!0),r(H,null,J(d,(n,t)=>(h(),r("div",{key:String(n.id)+"-"+t,class:P(["tree-item",{show:n.isShow,itemBorder:l.border===!0}]),style:s({paddingLeft:`${n.level*16}px`})},[o("div",de,[o("div",{class:"item-icon",onClick:R(u=>U(n,t),["stop"])},[!n.isLastLevel&&n.isShowChild?(h(),r("span",{key:0,class:"switch-on",style:s({borderTopColor:l.switchColor})},null,4)):!n.isLastLevel&&!n.isShowChild?(h(),r("span",{key:1,class:"switch-off",style:s({borderLeftColor:l.switchColor})},null,4)):(h(),r("span",{key:2,class:"item-last-dot",style:s({backgroundColor:l.switchColor})},null,4))],8,oe),o("div",{class:"item-main",onClick:R(u=>Y(n,t),["stop"])},[o("div",re,L(n.name)+L(n.childCount?`(${n.childCount})`:""),1),l.selectParent||n.isLastLevel?(h(),r("div",he,[n.checkStatus===1?(h(),r("div",{key:0,class:P(["item-check-yes",{radio:!l.multiple}]),style:s({borderColor:l.confirmColor})},[o("div",{class:"item-check-yes-part",style:s({backgroundColor:l.confirmColor})},null,4)],6)):n.checkStatus===2?(h(),r("div",{key:1,class:P(["item-check-yes",{radio:!l.multiple}]),style:s({borderColor:l.confirmColor})},[o("div",{class:"item-check-yes-all",style:s({borderColor:l.confirmColor})},null,4)],6)):(h(),r("div",{key:2,class:P(["item-check-no",{radio:!l.multiple}]),style:s({borderColor:l.confirmColor})},null,6))])):O("",!0)],8,se)])],6))),128))])])]),_:1},8,["show","style"])])}}}),fe=F(ue,[["__scopeId","data-v-29f6778f"]]),me={class:"page"},Ce={class:"content"},ke={class:"btns"},ve=V({name:"TreePickerExample",__name:"TreePickerExample",setup(l){const f=T(null),y=T([12]),c=T(""),S=[{id:1,name:"华北",children:[{id:11,name:"北京市",children:[{id:111,name:"朝阳区"},{id:112,name:"海淀区"},{id:113,name:"通州区",children:[{id:1131,name:"梨园"},{id:1132,name:"九棵树"},{id:1133,name:"宋庄"}]}]},{id:12,name:"天津市",children:[{id:121,name:"和平区"},{id:122,name:"河西区"},{id:123,name:"南开区"},{id:124,name:"滨海新区"}]},{id:13,name:"河北省",children:[{id:131,name:"石家庄市",children:[{id:1311,name:"长安区"},{id:1312,name:"桥西区"},{id:1313,name:"裕华区"}]},{id:132,name:"唐山市",children:[{id:1321,name:"路南区"},{id:1322,name:"路北区"},{id:1323,name:"丰南区"}]},{id:133,name:"保定市",children:[{id:1331,name:"竞秀区"},{id:1332,name:"莲池区"},{id:1333,name:"徐水区"}]}]}]},{id:2,name:"华东",children:[{id:21,name:"上海市",children:[{id:211,name:"浦东新区"},{id:212,name:"黄浦区"},{id:213,name:"闵行区",children:[{id:2131,name:"莘庄"},{id:2132,name:"七宝"},{id:2133,name:"颛桥"}]}]},{id:22,name:"江苏省",children:[{id:221,name:"南京市",children:[{id:2211,name:"玄武区"},{id:2212,name:"秦淮区"},{id:2213,name:"建邺区"}]},{id:222,name:"苏州市",children:[{id:2221,name:"姑苏区"},{id:2222,name:"吴中区"},{id:2223,name:"相城区"},{id:2224,name:"昆山市",children:[{id:22241,name:"玉山镇"},{id:22242,name:"花桥镇"},{id:22243,name:"周市镇"}]}]},{id:223,name:"无锡市",children:[{id:2231,name:"梁溪区"},{id:2232,name:"滨湖区"},{id:2233,name:"新吴区"}]}]},{id:23,name:"浙江省",children:[{id:231,name:"杭州市",children:[{id:2311,name:"西湖区"},{id:2312,name:"拱墅区"},{id:2313,name:"滨江区"}]},{id:232,name:"宁波市",children:[{id:2321,name:"海曙区"},{id:2322,name:"鄞州区"},{id:2323,name:"江北区"}]},{id:233,name:"温州市",children:[{id:2331,name:"鹿城区"},{id:2332,name:"瓯海区"},{id:2333,name:"龙湾区"}]}]},{id:24,name:"安徽省",children:[{id:241,name:"合肥市",children:[{id:2411,name:"蜀山区"},{id:2412,name:"包河区"},{id:2413,name:"瑶海区"}]},{id:242,name:"芜湖市",children:[{id:2421,name:"镜湖区"},{id:2422,name:"鸠江区"},{id:2423,name:"弋江区"}]}]}]},{id:3,name:"华南",children:[{id:31,name:"广东省",children:[{id:311,name:"广州市",children:[{id:3111,name:"天河区"},{id:3112,name:"越秀区"},{id:3113,name:"海珠区"}]},{id:312,name:"深圳市",children:[{id:3121,name:"南山区"},{id:3122,name:"福田区"},{id:3123,name:"宝安区"}]},{id:313,name:"佛山市",children:[{id:3131,name:"禅城区"},{id:3132,name:"南海区"},{id:3133,name:"顺德区"}]}]},{id:32,name:"广西壮族自治区",children:[{id:321,name:"南宁市"},{id:322,name:"桂林市"},{id:323,name:"柳州市"}]}]}],v=()=>f.value?.show(),d=(p,m)=>{y.value=p,c.value=m||""};return(p,m)=>{const I=ne,g=ee,k=te;return h(),r("div",me,[w(I,{title:"树形选择器","left-arrow":"",onClickLeft:m[0]||(m[0]=x=>p.$router.back())}),o("div",Ce,[w(g,{title:"当前选中",label:c.value||y.value.join(", ")||"未选择"},null,8,["label"]),o("div",ke,[w(k,{type:"primary",block:"",onClick:v},{default:z(()=>[...m[1]||(m[1]=[W("打开选择器",-1)])]),_:1})])]),w(fe,{ref_key:"pickerRef",ref:f,title:"请选择区域",localdata:S,"selected-data":y.value,multiple:!0,"select-parent":!0,border:"",onSelectChange:d},null,8,["selected-data"])])}}}),Pe=F(ve,[["__scopeId","data-v-bc877ca5"]]);export{Pe as default};
