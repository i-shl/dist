import{d as B,n as A,t as V,M as Q,m as X,c as H,r as k,u as q,a9 as ee,i as z,ak as te,D as J,aQ as oe,ab as ae,a as c,ad as M,aP as ne,a2 as se,N as W,an as le,E as U,h as re,aR as ie,g as ce,aS as de,aG as ue,aH as fe,P as pe,l as ve,I as me,w as j,p as F,x as $,s as T,aj as ge,F as he,y as ye,W as be,a1 as we,X as g,C as Ce,A as L,Z as N}from"./index-js4bVs2_.js";import{S as ke}from"./index-sI6s3q2N.js";import{C as _e}from"./index-BAc5JALO.js";import{u as xe}from"./use-id-C8IYf1c2.js";import{_ as G}from"./_plugin-vue_export-helper-C9BJcFhI.js";import{B as Oe}from"./index-FGkqOdiN.js";import"./use-route-B3Sw8vgr.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"51ca7370d41ada6ac5875e201d0b99f0587c6a8e"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new e.Error().stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="6e8b949d-e9e6-479e-8511-ce51e7e7402a",e._sentryDebugIdIdentifier="sentry-dbid-6e8b949d-e9e6-479e-8511-ce51e7e7402a")})()}catch{}const[K,S]=H("dropdown-menu"),Pe={overlay:V,zIndex:A,duration:X(.2),direction:Q("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:V,closeOnClickOverlay:V,swipeThreshold:A},Y=Symbol(K);var Ie=B({name:K,props:Pe,setup(e,{slots:l}){const d=xe(),m=k(),o=k(),f=k(0),{children:a,linkChildren:h}=q(Y),n=ee(m),r=z(()=>a.some(t=>t.state.showWrapper)),y=z(()=>e.swipeThreshold&&a.length>+e.swipeThreshold),s=z(()=>{if(r.value&&te(e.zIndex))return{zIndex:+e.zIndex+1}}),b=()=>{a.forEach(t=>{t.toggle(!1)})},O=()=>{e.closeOnClickOutside&&b()},_=()=>{if(o.value){const t=M(o);e.direction==="down"?f.value=t.bottom:f.value=ne.value-t.top}},u=()=>{r.value&&_()},w=t=>{a.forEach((i,p)=>{p===t?i.toggle():i.state.showPopup&&i.toggle(!1,{immediate:!0})})},I=(t,i)=>{const{showPopup:p}=t.state,{disabled:v,titleClass:x}=t;return c("div",{id:`${d}-${i}`,role:"button",tabindex:v?void 0:0,"data-allow-mismatch":"attribute",class:[S("item",{disabled:v,grow:y.value}),{[se]:!v}],onClick:()=>{v||w(i)}},[c("span",{class:[S("title",{down:p===(e.direction==="down"),active:p}),x],style:{color:p?e.activeColor:""}},[c("div",{class:"van-ellipsis"},[t.renderTitle()])])])};return J({close:b,opened:r}),h({id:d,props:e,offset:f,opened:r,updateOffset:_}),oe(m,O),ae("scroll",u,{target:n,passive:!0}),()=>{var t;return c("div",{ref:m,class:S()},[c("div",{ref:o,style:s.value,class:S("bar",{opened:r.value,scrollable:y.value})},[a.map(I)]),(t=l.default)==null?void 0:t.call(l)])}}});const[Se,E]=H("dropdown-item"),Ee={title:String,options:le(),disabled:Boolean,teleport:[String,Object],lazyRender:V,modelValue:W,titleClass:W};var Ve=B({name:Se,inheritAttrs:!1,props:Ee,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:l,slots:d,attrs:m}){const o=U({showPopup:!1,transition:!0,showWrapper:!1}),f=k(),{parent:a,index:h}=re(Y);if(!a)return;const n=t=>()=>l(t),r=n("open"),y=n("close"),s=n("opened"),b=()=>{o.showWrapper=!1,l("closed")},O=t=>{e.teleport&&t.stopPropagation()},_=(t=!o.showPopup,i={})=>{t!==o.showPopup&&(o.showPopup=t,o.transition=!i.immediate,t&&(a.updateOffset(),o.showWrapper=!0))},u=()=>{if(d.title)return d.title();if(e.title)return e.title;const t=e.options.find(i=>i.value===e.modelValue);return t?t.text:""},w=t=>{const{activeColor:i}=a.props,{disabled:p}=t,v=t.value===e.modelValue,x=()=>{p||(o.showPopup=!1,t.value!==e.modelValue&&(l("update:modelValue",t.value),l("change",t.value)))},P=()=>{if(v)return c(me,{class:E("icon"),color:p?void 0:i,name:"success"},null)};return c(_e,{role:"menuitem",key:String(t.value),icon:t.icon,title:t.text,class:E("option",{active:v,disabled:p}),style:{color:v?i:""},tabindex:v?0:-1,clickable:!p,onClick:x},{value:P})},I=()=>{const{offset:t}=a,{autoLocate:i,zIndex:p,overlay:v,duration:x,direction:P,closeOnClickOverlay:Z}=a.props,R=ce(p);let D=t.value;if(i&&f.value){const C=de(f.value);C&&(D-=M(C).top)}return P==="down"?R.top=`${D}px`:R.bottom=`${D}px`,ue(c("div",ve({ref:f,style:R,class:E([P]),onClick:O},m),[c(pe,{show:o.showPopup,"onUpdate:show":C=>o.showPopup=C,role:"menu",class:E("content"),overlay:v,overlayProps:{duration:o.transition&&!a.opened.value?x:0},position:P==="down"?"top":"bottom",duration:o.transition?x:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${a.id}-${h.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:Z,onOpen:r,onClose:y,onOpened:s,onClosed:b},{default:()=>{var C;return[e.options.map(w),(C=d.default)==null?void 0:C.call(d)]}})]),[[fe,o.showWrapper]])};return J({state:o,toggle:_,renderTitle:u}),()=>e.teleport?c(ie,{to:e.teleport},{default:()=>[I()]}):I()}});const $e=j(Ve),Te=j(Ie),Be={class:"base-filter"},Re=B({name:"BaseFilter",__name:"BaseFilter",props:{items:{},activeColor:{default:"#1989fa"},backgroundColor:{default:"var(--app-card-bg-color)"},closeOnClickOverlay:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0}},emits:["change","itemChange"],setup(e,{expose:l,emit:d}){const m=e,o=d,f=k(),a=U({}),h=()=>{m.items.forEach(s=>{s.value!==void 0?a[s.name]=s.value:s.options&&s.options.length>0&&(a[s.name]=s.options[0]?.value)})};h();const n=(s,b)=>{o("itemChange",s,b),o("change",{...a})};return l({getValues:()=>({...a}),reset:()=>{h(),o("change",{...a})},menuRef:f}),(s,b)=>{const O=$e,_=Te;return $(),F("div",Be,[c(_,{ref_key:"menuRef",ref:f,"active-color":e.activeColor,background:e.backgroundColor,"close-on-click-overlay":e.closeOnClickOverlay,"close-on-click-outside":e.closeOnClickOutside},{default:T(()=>[($(!0),F(he,null,ye(e.items,u=>($(),be(O,{key:u.name,modelValue:a[u.name],"onUpdate:modelValue":w=>a[u.name]=w,title:u.title,options:u.options,disabled:u.disabled,"title-class":u.titleClass,class:we(u.optionsClass),onChange:w=>n(u.name,w)},null,8,["modelValue","onUpdate:modelValue","title","options","disabled","title-class","class","onChange"]))),128)),ge(s.$slots,"default",{},void 0,!0)]),_:3},8,["active-color","background","close-on-click-overlay","close-on-click-outside"])])}}}),De=G(Re,[["__scopeId","data-v-8bf2e729"]]),ze={class:"filter-example-container"},Ne={class:"content-area"},Fe={class:"result-box"},Ae={class:"actions"},We=B({__name:"FilterExample",setup(e){const l=k(),d=k("当前列表内容：全部数据"),m=[{name:"type",title:"商品类型",options:[{text:"全部商品",value:""},{text:"新款商品",value:"new"},{text:"活动商品",value:"activity"}]},{name:"sort",title:"默认排序",options:[{text:"默认排序",value:"default"},{text:"好评排序",value:"score"},{text:"销量排序",value:"sales"}]},{name:"status",title:"状态",value:0,options:[{text:"上架",value:1},{text:"下架",value:0}]}],o=n=>{console.log("筛选条件变化:",n),N(`请求参数: ${JSON.stringify(n)}`),d.value=`正在加载 ${JSON.stringify(n)} 对应的数据...`,setTimeout(()=>{d.value=`加载完成！当前展示条件：
类型: ${n.type||"全部"}
排序: ${n.sort}
状态: ${n.status===1?"上架":"下架"}`},500)},f=(n,r)=>{console.log(`字段 ${n} 变更为:`,r)},a=()=>{const n=l.value?.getValues();N(JSON.stringify(n))},h=()=>{l.value?.reset(),N("已重置")};return(n,r)=>{const y=ke,s=Oe;return $(),F("div",ze,[c(y,{"offset-top":0},{default:T(()=>[c(De,{ref_key:"filterRef",ref:l,items:m,onChange:o,onItemChange:f},null,512)]),_:1}),g("div",Ne,[g("div",Fe,[g("pre",null,Ce(d.value),1)]),g("div",Ae,[c(s,{block:"",type:"primary",size:"small",onClick:a},{default:T(()=>[...r[0]||(r[0]=[L(" 获取当前筛选值 ",-1)])]),_:1}),c(s,{block:"",size:"small",onClick:h},{default:T(()=>[...r[1]||(r[1]=[L(" 重置筛选 ",-1)])]),_:1})]),r[2]||(r[2]=g("div",{class:"tip"},[g("p",null,"提示："),g("p",null,"1. 筛选组件默认吸顶展示。"),g("p",null,'2. "商品类型"和"默认排序"有默认选中项。'),g("p",null,'3. "状态"我们设置了默认值为 0 (下架)。')],-1))])])}}}),Ke=G(We,[["__scopeId","data-v-b404af76"]]);export{Ke as default};
