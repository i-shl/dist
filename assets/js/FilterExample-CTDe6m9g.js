import{d as T,J as A,v as E,x as Q,y as X,z as J,r as k,$ as Z,A as ee,c as z,U as te,D as K,aH as oe,E as ae,b as i,G as U,aI as ne,_ as se,a8 as L,X as le,K as H,Y as re,aJ as ie,aK as ce,aL as de,ap as ue,aq as fe,ai as pe,a4 as ve,af as me,I as Y,a as F,o as V,w as B,Q as ge,R as he,S as be,P as ye,aw as we,i as h,t as Ce,j as W,s as N}from"./index-D3iEbD-x.js";import{S as ke}from"./index-Coh2QGK0.js";import{N as _e}from"./index-BXggL-Qo.js";import{C as xe}from"./index-BiHypUec.js";import{u as Oe}from"./use-id-CekJkqcj.js";import{_ as j}from"./_plugin-vue_export-helper-CaF5yFZK.js";import{B as Pe}from"./index-L5KECWFd.js";import"./use-route-BYBmQqsa.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0b41023e4cb7a08a546cdc5389cade6da56f1f8a"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new e.Error().stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="23ac26eb-c547-4d8c-987b-5ec6c9338367",e._sentryDebugIdIdentifier="sentry-dbid-23ac26eb-c547-4d8c-987b-5ec6c9338367")})()}catch{}const[G,S]=J("dropdown-menu"),Ie={overlay:E,zIndex:A,duration:X(.2),direction:Q("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:E,closeOnClickOverlay:E,swipeThreshold:A},M=Symbol(G);var Se=T({name:G,props:Ie,setup(e,{slots:l}){const d=Oe(),g=k(),o=k(),f=k(0),{children:a,linkChildren:b}=Z(M),n=ee(g),s=z(()=>a.some(t=>t.state.showWrapper)),y=z(()=>e.swipeThreshold&&a.length>+e.swipeThreshold),r=z(()=>{if(s.value&&te(e.zIndex))return{zIndex:+e.zIndex+1}}),m=()=>{a.forEach(t=>{t.toggle(!1)})},_=()=>{e.closeOnClickOutside&&m()},x=()=>{if(o.value){const t=U(o);e.direction==="down"?f.value=t.bottom:f.value=ne.value-t.top}},u=()=>{s.value&&x()},w=t=>{a.forEach((c,p)=>{p===t?c.toggle():c.state.showPopup&&c.toggle(!1,{immediate:!0})})},I=(t,c)=>{const{showPopup:p}=t.state,{disabled:v,titleClass:O}=t;return i("div",{id:`${d}-${c}`,role:"button",tabindex:v?void 0:0,"data-allow-mismatch":"attribute",class:[S("item",{disabled:v,grow:y.value}),{[se]:!v}],onClick:()=>{v||w(c)}},[i("span",{class:[S("title",{down:p===(e.direction==="down"),active:p}),O],style:{color:p?e.activeColor:""}},[i("div",{class:"van-ellipsis"},[t.renderTitle()])])])};return K({close:m,opened:s}),b({id:d,props:e,offset:f,opened:s,updateOffset:x}),oe(g,_),ae("scroll",u,{target:n,passive:!0}),()=>{var t;return i("div",{ref:g,class:S()},[i("div",{ref:o,style:r.value,class:S("bar",{opened:s.value,scrollable:y.value})},[a.map(I)]),(t=l.default)==null?void 0:t.call(l)])}}});const[$e,$]=J("dropdown-item"),Ee={title:String,options:le(),disabled:Boolean,teleport:[String,Object],lazyRender:E,modelValue:L,titleClass:L};var Ve=T({name:$e,inheritAttrs:!1,props:Ee,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:l,slots:d,attrs:g}){const o=H({showPopup:!1,transition:!0,showWrapper:!1}),f=k(),{parent:a,index:b}=re(M);if(!a)return;const n=t=>()=>l(t),s=n("open"),y=n("close"),r=n("opened"),m=()=>{o.showWrapper=!1,l("closed")},_=t=>{e.teleport&&t.stopPropagation()},x=(t=!o.showPopup,c={})=>{t!==o.showPopup&&(o.showPopup=t,o.transition=!c.immediate,t&&(a.updateOffset(),o.showWrapper=!0))},u=()=>{if(d.title)return d.title();if(e.title)return e.title;const t=e.options.find(c=>c.value===e.modelValue);return t?t.text:""},w=t=>{const{activeColor:c}=a.props,{disabled:p}=t,v=t.value===e.modelValue,O=()=>{p||(o.showPopup=!1,t.value!==e.modelValue&&(l("update:modelValue",t.value),l("change",t.value)))},P=()=>{if(v)return i(me,{class:$("icon"),color:p?void 0:c,name:"success"},null)};return i(xe,{role:"menuitem",key:String(t.value),icon:t.icon,title:t.text,class:$("option",{active:v,disabled:p}),style:{color:v?c:""},tabindex:v?0:-1,clickable:!p,onClick:O},{value:P})},I=()=>{const{offset:t}=a,{autoLocate:c,zIndex:p,overlay:v,duration:O,direction:P,closeOnClickOverlay:q}=a.props,R=ce(p);let D=t.value;if(c&&f.value){const C=de(f.value);C&&(D-=U(C).top)}return P==="down"?R.top=`${D}px`:R.bottom=`${D}px`,ue(i("div",ve({ref:f,style:R,class:$([P]),onClick:_},g),[i(pe,{show:o.showPopup,"onUpdate:show":C=>o.showPopup=C,role:"menu",class:$("content"),overlay:v,overlayProps:{duration:o.transition&&!a.opened.value?O:0},position:P==="down"?"top":"bottom",duration:o.transition?O:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${a.id}-${b.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:q,onOpen:s,onClose:y,onOpened:r,onClosed:m},{default:()=>{var C;return[e.options.map(w),(C=d.default)==null?void 0:C.call(d)]}})]),[[fe,o.showWrapper]])};return K({state:o,toggle:x,renderTitle:u}),()=>e.teleport?i(ie,{to:e.teleport},{default:()=>[I()]}):I()}});const Be=Y(Ve),Te=Y(Se),Re={class:"base-filter"},De=T({name:"BaseFilter",__name:"BaseFilter",props:{items:{},activeColor:{default:"#1989fa"},backgroundColor:{default:"var(--app-card-bg-color)"},closeOnClickOverlay:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0}},emits:["change","itemChange"],setup(e,{expose:l,emit:d}){const g=e,o=d,f=k(),a=H({}),b=()=>{g.items.forEach(r=>{r.value!==void 0?a[r.name]=r.value:r.options&&r.options.length>0&&(a[r.name]=r.options[0]?.value)})};b();const n=(r,m)=>{o("itemChange",r,m),o("change",{...a})};return l({getValues:()=>({...a}),reset:()=>{b(),o("change",{...a})},menuRef:f}),(r,m)=>{const _=Be,x=Te;return V(),F("div",Re,[i(x,{ref_key:"menuRef",ref:f,"active-color":e.activeColor,background:e.backgroundColor,"close-on-click-overlay":e.closeOnClickOverlay,"close-on-click-outside":e.closeOnClickOutside},{default:B(()=>[(V(!0),F(he,null,be(e.items,u=>(V(),ye(_,{key:u.name,modelValue:a[u.name],"onUpdate:modelValue":w=>a[u.name]=w,title:u.title,options:u.options,disabled:u.disabled,"title-class":u.titleClass,class:we(u.optionsClass),onChange:w=>n(u.name,w)},null,8,["modelValue","onUpdate:modelValue","title","options","disabled","title-class","class","onChange"]))),128)),ge(r.$slots,"default",{},void 0,!0)]),_:3},8,["active-color","background","close-on-click-overlay","close-on-click-outside"])])}}}),ze=j(De,[["__scopeId","data-v-8bf2e729"]]),Ne={class:"filter-example-container"},Fe={class:"content-area"},Ae={class:"result-box"},Le={class:"actions"},We=T({__name:"FilterExample",setup(e){const l=k(),d=k("当前列表内容：全部数据"),g=[{name:"type",title:"商品类型",options:[{text:"全部商品",value:""},{text:"新款商品",value:"new"},{text:"活动商品",value:"activity"}]},{name:"sort",title:"默认排序",options:[{text:"默认排序",value:"default"},{text:"好评排序",value:"score"},{text:"销量排序",value:"sales"}]},{name:"status",title:"状态",value:0,options:[{text:"上架",value:1},{text:"下架",value:0}]}],o=n=>{console.log("筛选条件变化:",n),N(`请求参数: ${JSON.stringify(n)}`),d.value=`正在加载 ${JSON.stringify(n)} 对应的数据...`,setTimeout(()=>{d.value=`加载完成！当前展示条件：
类型: ${n.type||"全部"}
排序: ${n.sort}
状态: ${n.status===1?"上架":"下架"}`},500)},f=(n,s)=>{console.log(`字段 ${n} 变更为:`,s)},a=()=>{const n=l.value?.getValues();N(JSON.stringify(n))},b=()=>{l.value?.reset(),N("已重置")};return(n,s)=>{const y=_e,r=ke,m=Pe;return V(),F("div",Ne,[i(y,{title:"筛选组件示例","left-arrow":"",onClickLeft:s[0]||(s[0]=_=>n.$router.back())}),i(r,{"offset-top":0},{default:B(()=>[i(ze,{ref_key:"filterRef",ref:l,items:g,onChange:o,onItemChange:f},null,512)]),_:1}),h("div",Fe,[h("div",Ae,[h("pre",null,Ce(d.value),1)]),h("div",Le,[i(m,{block:"",type:"primary",size:"small",onClick:a},{default:B(()=>[...s[1]||(s[1]=[W(" 获取当前筛选值 ",-1)])]),_:1}),i(m,{block:"",size:"small",onClick:b},{default:B(()=>[...s[2]||(s[2]=[W(" 重置筛选 ",-1)])]),_:1})]),s[3]||(s[3]=h("div",{class:"tip"},[h("p",null,"提示："),h("p",null,"1. 筛选组件默认吸顶展示。"),h("p",null,'2. "商品类型"和"默认排序"有默认选中项。'),h("p",null,'3. "状态"我们设置了默认值为 0 (下架)。')],-1))])])}}}),qe=j(We,[["__scopeId","data-v-be886fb6"]]);export{qe as default};
