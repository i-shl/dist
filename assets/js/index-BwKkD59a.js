import{d as U,t as D,m as O,n as V,c as j,r as F,E as q,ag as re,u as fe,i as d,D as G,o as P,b6 as ve,a4 as J,a_ as de,aO as he,b5 as ge,aT as we,ab as me,a as _,b2 as A,ae as K,ac as Q,ai as be,al as R,aC as ye,aP as Te,w as Z,h as pe}from"./index-I_kz0OBq.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"f7e57e3c537ca0bc1e582f9ec803810f33e7d1e0"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},h=new e.Error().stack;h&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[h]="7c26117a-1f42-46a2-aae1-d968eca43bfe",e._sentryDebugIdIdentifier="sentry-dbid-7c26117a-1f42-46a2-aae1-d968eca43bfe")})()}catch{}const[ee,$]=j("swipe"),Se={loop:D,width:V,height:V,vertical:Boolean,autoplay:O(0),duration:O(500),touchable:D,lazyRender:Boolean,initialSwipe:O(0),indicatorColor:String,showIndicators:D,stopPropagation:D},te=Symbol(ee);var xe=U({name:ee,props:Se,emits:["change","dragStart","dragEnd"],setup(e,{emit:h,slots:w}){const u=F(),g=F(),a=q({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let T=!1;const r=re(),{children:m,linkChildren:s}=fe(te),i=d(()=>m.length),o=d(()=>a[e.vertical?"height":"width"]),f=d(()=>e.vertical?r.deltaY.value:r.deltaX.value),y=d(()=>a.rect?(e.vertical?a.rect.height:a.rect.width)-o.value*i.value:0),k=d(()=>o.value?Math.ceil(Math.abs(y.value)/o.value):i.value),z=d(()=>i.value*o.value),p=d(()=>(a.active+i.value)%i.value),Y=d(()=>{const t=e.vertical?"vertical":"horizontal";return r.direction.value===t}),ae=d(()=>{const t={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+a.offset.toFixed(2)}px)`};if(o.value){const l=e.vertical?"height":"width",n=e.vertical?"width":"height";t[l]=`${z.value}px`,t[n]=e[n]?`${e[n]}px`:""}return t}),ie=t=>{const{active:l}=a;return t?e.loop?R(l+t,-1,i.value):R(l+t,0,k.value):l},B=(t,l=0)=>{let n=t*o.value;e.loop||(n=Math.min(n,-y.value));let v=l-n;return e.loop||(v=R(v,y.value,0)),v},b=({pace:t=0,offset:l=0,emitChange:n})=>{if(i.value<=1)return;const{active:v}=a,c=ie(t),I=B(c,l);if(e.loop){if(m[0]&&I!==y.value){const M=I<y.value;m[0].setOffset(M?z.value:0)}if(m[i.value-1]&&I!==0){const M=I>0;m[i.value-1].setOffset(M?-z.value:0)}}a.active=c,a.offset=I,n&&c!==v&&h("change",p.value)},C=()=>{a.swiping=!0,a.active<=-1?b({pace:i.value}):a.active>=i.value&&b({pace:-i.value})},ne=()=>{C(),r.reset(),A(()=>{a.swiping=!1,b({pace:-1,emitChange:!0})})},N=()=>{C(),r.reset(),A(()=>{a.swiping=!1,b({pace:1,emitChange:!0})})};let X;const x=()=>clearTimeout(X),E=()=>{x(),+e.autoplay>0&&i.value>1&&(X=setTimeout(()=>{N(),E()},+e.autoplay))},S=(t=+e.initialSwipe)=>{if(!u.value)return;const l=()=>{var n,v;if(!K(u)){const c={width:u.value.offsetWidth,height:u.value.offsetHeight};a.rect=c,a.width=+((n=e.width)!=null?n:c.width),a.height=+((v=e.height)!=null?v:c.height)}i.value&&(t=Math.min(i.value-1,t),t===-1&&(t=i.value-1)),a.active=t,a.swiping=!0,a.offset=B(t),m.forEach(c=>{c.setOffset(0)}),E()};K(u)?Q().then(l):l()},H=()=>S(a.active);let L;const le=t=>{!e.touchable||t.touches.length>1||(r.start(t),T=!1,L=Date.now(),x(),C())},oe=t=>{e.touchable&&a.swiping&&(r.move(t),Y.value&&(!e.loop&&(a.active===0&&f.value>0||a.active===i.value-1&&f.value<0)||(be(t,e.stopPropagation),b({offset:f.value}),T||(h("dragStart",{index:p.value}),T=!0))))},W=()=>{if(!e.touchable||!a.swiping)return;const t=Date.now()-L,l=f.value/t;if((Math.abs(l)>.25||Math.abs(f.value)>o.value/2)&&Y.value){const v=e.vertical?r.offsetY.value:r.offsetX.value;let c=0;e.loop?c=v>0?f.value>0?-1:1:0:c=-Math[f.value>0?"ceil":"floor"](f.value/o.value),b({pace:c,emitChange:!0})}else f.value&&b({pace:0});T=!1,a.swiping=!1,h("dragEnd",{index:p.value}),E()},se=(t,l={})=>{C(),r.reset(),A(()=>{let n;e.loop&&t===i.value?n=a.active===0?0:t:n=t%i.value,l.immediate?A(()=>{a.swiping=!1}):a.swiping=!1,b({pace:n-a.active,emitChange:!0})})},ce=(t,l)=>{const n=l===p.value,v=n?{backgroundColor:e.indicatorColor}:void 0;return _("i",{style:v,class:$("indicator",{active:n})},null)},ue=()=>{if(w.indicator)return w.indicator({active:p.value,total:i.value});if(e.showIndicators&&i.value>1)return _("div",{class:$("indicators",{vertical:e.vertical})},[Array(i.value).fill("").map(ce)])};return G({prev:ne,next:N,state:a,resize:H,swipeTo:se}),s({size:o,props:e,count:i,activeIndicator:p}),P(()=>e.initialSwipe,t=>S(+t)),P(i,()=>S(a.active)),P(()=>e.autoplay,E),P([ye,Te,()=>e.width,()=>e.height],H),P(ve(),t=>{t==="visible"?E():x()}),J(S),de(()=>S(a.active)),he(()=>S(a.active)),ge(x),we(x),me("touchmove",oe,{target:g}),()=>{var t;return _("div",{ref:u,class:$()},[_("div",{ref:g,style:ae.value,class:$("track",{vertical:e.vertical}),onTouchstartPassive:le,onTouchend:W,onTouchcancel:W},[(t=w.default)==null?void 0:t.call(w)]),ue()])}}});const Ce=Z(xe),[Ee,Ie]=j("swipe-item");var Pe=U({name:Ee,setup(e,{slots:h}){let w;const u=q({offset:0,inited:!1,mounted:!1}),{parent:g,index:a}=pe(te);if(!g)return;const T=d(()=>{const s={},{vertical:i}=g.props;return g.size.value&&(s[i?"height":"width"]=`${g.size.value}px`),u.offset&&(s.transform=`translate${i?"Y":"X"}(${u.offset}px)`),s}),r=d(()=>{const{loop:s,lazyRender:i}=g.props;if(!i||w)return!0;if(!u.mounted)return!1;const o=g.activeIndicator.value,f=g.count.value-1,y=o===0&&s?f:o-1,k=o===f&&s?0:o+1;return w=a.value===o||a.value===y||a.value===k,w}),m=s=>{u.offset=s};return J(()=>{Q(()=>{u.mounted=!0})}),G({setOffset:m}),()=>{var s;return _("div",{class:Ie(),style:T.value},[r.value?(s=h.default)==null?void 0:s.call(h):null])}}});const De=Z(Pe);export{De as S,Ce as a};
