import{a1 as s}from"./index-D2HfH2Nx.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"051ca6428b97c6d36ca483b6bd6aaeed95b441f8"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="72709b81-5333-4898-ac98-0b09a79e37e5",e._sentryDebugIdIdentifier="sentry-dbid-72709b81-5333-4898-ac98-0b09a79e37e5")})()}catch{}function o(){if(typeof window<"u"&&window.uni)return window.uni;if(typeof globalThis<"u"&&globalThis.uni)return globalThis.uni}function r(){const e=s();return["mp-weixin","mp-qiwei","mp-lark"].includes(e.env)}function a(){return new Promise(e=>{const n=o();if(n&&typeof n.postMessage=="function"){e();return}const i=()=>{const t=o();t&&typeof t.postMessage=="function"&&e()};i(),document.addEventListener("UniAppJSBridgeReady",i,{once:!0}),setTimeout(()=>{document.removeEventListener("UniAppJSBridgeReady",i),e()},5e3)})}async function f(e){try{if(await a(),!r())return console.warn("当前不在小程序环境中，无法发送消息"),!1;const n=o();return!n||typeof n.postMessage!="function"?(console.warn("uni.postMessage 不可用，请确保已加载 uni.webview.js"),!1):(n.postMessage({data:e}),alert(JSON.stringify(e)),console.log("消息已发送到小程序:",e),!0)}catch(n){return console.error("发送消息失败:",n),!1}}async function u(e){await f({action:"test",page:e,timestamp:Date.now(),message:`来自 ${e} 页面的测试消息`})}export{f as a,u as s};
