import{i as $e,j as D,k as Y,n as M,m as q,d as O,l as J,p as G,e as o,q as T,I as $,r as X,s as Oe,v as ze,x as qe,y as Ne,z as Ge,A as Fe,B as P,C as fe,D as w,E as N,F as ge,G as me,H as be,J as U,K as We,L as je,M as Ue,N as p,O as Ke,P as He,Q as oe,h as z,R as H,S as Ye,T as Je,U as Xe,V as Qe,W as Ze,X as pe,Y as et,Z as tt,_ as nt,u as at,$ as lt,f as it,c as rt,a as B,w as ee,o as ot,t as st,a0 as ct,a1 as se}from"./index-FG6zIdEb.js";import{u as ut,r as dt,B as ft}from"./index-DiqXot1-.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"7ee8ad529cf9b31e2667692f5207ff7151a33ca9"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e86f1427-46c2-40de-a79d-4d47c2da04a8",e._sentryDebugIdIdentifier="sentry-dbid-e86f1427-46c2-40de-a79d-4d47c2da04a8")})()}catch{}let gt=0;function mt(){const e=$e(),{name:n="unknown"}=e?.type||{};return`${n}-${++gt}`}const[bt,A]=G("cell"),ve={tag:q("div"),icon:String,size:String,title:M,value:M,label:M,center:Boolean,isLink:Boolean,border:Y,iconPrefix:String,valueClass:D,labelClass:D,titleClass:D,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},vt=J({},ve,dt);var ht=O({name:bt,props:vt,setup(e,{slots:n}){const i=ut(),c=()=>{if(n.label||T(e.label))return o("div",{class:[A("label"),e.labelClass]},[n.label?n.label():e.label])},a=()=>{var s;if(n.title||T(e.title)){const b=(s=n.title)==null?void 0:s.call(n);return Array.isArray(b)&&b.length===0?void 0:o("div",{class:[A("title"),e.titleClass],style:e.titleStyle},[b||o("span",null,[e.title]),c()])}},r=()=>{const s=n.value||n.default;if(s||T(e.value))return o("div",{class:[A("value"),e.valueClass]},[s?s():o("span",null,[e.value])])},C=()=>{if(n.icon)return n.icon();if(e.icon)return o($,{name:e.icon,class:A("left-icon"),classPrefix:e.iconPrefix},null)},m=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const s=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return o($,{name:s,class:A("right-icon")},null)}};return()=>{var s;const{tag:b,size:f,center:g,border:l,isLink:V,required:k}=e,h=(s=e.clickable)!=null?s:V,I={center:g,required:!!k,clickable:h,borderless:!l};return f&&(I[f]=!!f),o(b,{class:A(I),role:h?"button":void 0,tabindex:h?0:void 0,onClick:i},{default:()=>{var S;return[C(),a(),r(),m(),(S=n.extra)==null?void 0:S.call(n)]}})}}});const yt=X(ht);function he(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function kt(e,n){if(he(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function St(e,n){return new Promise(i=>{const c=n.validator(e,n);if(Ge(c)){c.then(i);return}i(c)})}function ce(e,n){const{message:i}=n;return Ne(i)?i(e,n):i||""}function Ct({target:e}){e.composing=!0}function ue({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Vt(e,n){const i=Oe();e.style.height="auto";let c=e.scrollHeight;if(ze(n)){const{maxHeight:a,minHeight:r}=n;a!==void 0&&(c=Math.min(c,a)),r!==void 0&&(c=Math.max(c,r))}c&&(e.style.height=`${c}px`,qe(i))}function xt(e,n){return e==="number"&&(e="text",n??(n="decimal")),e==="digit"&&(e="tel",n??(n="numeric")),{type:e,inputmode:n}}function K(e){return[...e].length}function te(e,n){return[...e].slice(0,n).join("")}const[_t,x]=G("field"),wt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:M,max:Number,min:Number,formatter:Function,clearIcon:q("clear"),modelValue:Ke(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:q("focus"),formatTrigger:q("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},It=J({},ve,wt,{rows:M,type:q("text"),rules:Array,autosize:[Boolean,Object],labelWidth:M,labelClass:D,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Et=O({name:_t,props:It,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:i}){const c=mt(),a=Fe({status:"unvalidated",focused:!1,validateMessage:""}),r=P(),C=P(),m=P(),{parent:s}=fe(He),b=()=>{var t;return String((t=e.modelValue)!=null?t:"")},f=t=>{if(T(e[t]))return e[t];if(s&&T(s.props[t]))return s.props[t]},g=w(()=>{const t=f("readonly");if(e.clearable&&!t){const u=b()!=="",d=e.clearTrigger==="always"||e.clearTrigger==="focus"&&a.focused;return u&&d}return!1}),l=w(()=>m.value&&i.input?m.value():e.modelValue),V=w(()=>{var t;const u=f("required");return u==="auto"?(t=e.rules)==null?void 0:t.some(d=>d.required):u}),k=t=>t.reduce((u,d)=>u.then(()=>{if(a.status==="failed")return;let{value:v}=l;if(d.formatter&&(v=d.formatter(v,d)),!kt(v,d)){a.status="failed",a.validateMessage=ce(v,d);return}if(d.validator)return he(v)&&d.validateEmpty===!1?void 0:St(v,d).then(y=>{y&&typeof y=="string"?(a.status="failed",a.validateMessage=y):y===!1&&(a.status="failed",a.validateMessage=ce(v,d))})}),Promise.resolve()),h=()=>{a.status="unvalidated",a.validateMessage=""},I=()=>n("endValidate",{status:a.status,message:a.validateMessage}),S=(t=e.rules)=>new Promise(u=>{h(),t?(n("startValidate"),k(t).then(()=>{a.status==="failed"?(u({name:e.name,message:a.validateMessage}),I()):(a.status="passed",u(),I())})):u()}),Q=t=>{if(s&&e.rules){const{validateTrigger:u}=s.props,d=oe(u).includes(t),v=e.rules.filter(y=>y.trigger?oe(y.trigger).includes(t):d);v.length&&S(v)}},ke=t=>{var u;const{maxlength:d}=e;if(T(d)&&K(t)>+d){const v=b();if(v&&K(v)===+d)return v;const y=(u=r.value)==null?void 0:u.selectionEnd;if(a.focused&&y){const L=[...t],R=L.length-+d;return L.splice(y-R,R),L.join("")}return te(t,+d)}return t},F=(t,u="onChange")=>{var d,v;const y=t;t=ke(t);const L=y.length-t.length;if(e.type==="number"||e.type==="digit"){const E=e.type==="number";if(t=je(t,E,E),u==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)){const _=Ue(+t,(d=e.min)!=null?d:-1/0,(v=e.max)!=null?v:1/0);+t!==_&&(t=_.toString())}}let R=0;if(e.formatter&&u===e.formatTrigger){const{formatter:E,maxlength:_}=e;if(t=E(t),T(_)&&K(t)>+_&&(t=te(t,+_)),r.value&&a.focused){const{selectionEnd:j}=r.value,re=te(y,j);R=E(re).length-re.length}}if(r.value&&r.value.value!==t)if(a.focused){let{selectionStart:E,selectionEnd:_}=r.value;if(r.value.value=t,T(E)&&T(_)){const j=t.length;L?(E-=L,_-=L):R&&(E+=R,_+=R),r.value.setSelectionRange(Math.min(E,j),Math.min(_,j))}}else r.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},Se=t=>{t.target.composing||F(t.target.value)},Z=()=>{var t;return(t=r.value)==null?void 0:t.blur()},ne=()=>{var t;return(t=r.value)==null?void 0:t.focus()},W=()=>{const t=r.value;e.type==="textarea"&&e.autosize&&t&&Vt(t,e.autosize)},Ce=t=>{a.focused=!0,n("focus",t),U(W),f("readonly")&&Z()},Ve=t=>{a.focused=!1,F(b(),"onBlur"),n("blur",t),!f("readonly")&&(Q("onBlur"),U(W),Ye())},ae=t=>n("clickInput",t),xe=t=>n("clickLeftIcon",t),_e=t=>n("clickRightIcon",t),we=t=>{p(t),n("update:modelValue",""),n("clear",t)},le=w(()=>{if(typeof e.error=="boolean")return e.error;if(s&&s.props.showError&&a.status==="failed")return!0}),Ie=w(()=>{const t=f("labelWidth"),u=f("labelAlign");if(t&&u!=="top")return{width:N(t)}}),Ee=t=>{t.keyCode===13&&(!(s&&s.props.submitOnEnter)&&e.type!=="textarea"&&p(t),e.type==="search"&&Z()),n("keypress",t)},ie=()=>e.id||`${c}-input`,Pe=()=>a.status,Te=()=>{const t=x("control",[f("inputAlign"),{error:le.value,custom:!!i.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(i.input)return o("div",{class:t,onClick:ae},[i.input()]);const u={id:ie(),ref:r,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:f("disabled"),readonly:f("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${c}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:Ve,onFocus:Ce,onInput:Se,onClick:ae,onChange:ue,onKeypress:Ee,onCompositionend:ue,onCompositionstart:Ct};return e.type==="textarea"?o("textarea",H(u,{inputmode:e.inputmode}),null):o("input",H(xt(e.type,e.inputmode),u),null)},Be=()=>{const t=i["left-icon"];if(e.leftIcon||t)return o("div",{class:x("left-icon"),onClick:xe},[t?t():o($,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Le=()=>{const t=i["right-icon"];if(e.rightIcon||t)return o("div",{class:x("right-icon"),onClick:_e},[t?t():o($,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Re=()=>{if(e.showWordLimit&&e.maxlength){const t=K(b());return o("div",{class:x("word-limit")},[o("span",{class:x("word-num")},[t]),z("/"),e.maxlength])}},Me=()=>{if(s&&s.props.showErrorMessage===!1)return;const t=e.errorMessage||a.validateMessage;if(t){const u=i["error-message"],d=f("errorMessageAlign");return o("div",{class:x("error-message",d)},[u?u({message:t}):t])}},Ae=()=>{const t=f("labelWidth"),u=f("labelAlign"),d=f("colon")?":":"";if(i.label)return[i.label(),d];if(e.label)return o("label",{id:`${c}-label`,for:i.input?void 0:ie(),"data-allow-mismatch":"attribute",onClick:v=>{p(v),ne()},style:u==="top"&&t?{width:N(t)}:void 0},[e.label+d])},De=()=>[o("div",{class:x("body")},[Te(),g.value&&o($,{ref:C,name:e.clearIcon,class:x("clear")},null),Le(),i.button&&o("div",{class:x("button")},[i.button()])]),Re(),Me()];return ge({blur:Z,focus:ne,validate:S,formValue:l,resetValidation:h,getValidationStatus:Pe}),Je(Xe,{customValue:m,resetValidation:h,validateWithTrigger:Q}),me(()=>e.modelValue,()=>{F(b()),h(),Q("onChange"),U(W)}),be(()=>{F(b(),e.formatTrigger),U(W)}),We("touchstart",we,{target:w(()=>{var t;return(t=C.value)==null?void 0:t.$el})}),()=>{const t=f("disabled"),u=f("labelAlign"),d=Be(),v=()=>{const y=Ae();return u==="top"?[d,y].filter(Boolean):y||[]};return o(yt,{size:e.size,class:x({error:le.value,disabled:t,[`label-${u}`]:u}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Ie.value,valueClass:x("value"),titleClass:[x("label",[u,{required:V.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:d&&u!=="top"?()=>d:null,title:v,value:De,extra:i.extra})}}});const Pt=X(Et),[Tt]=G("checkbox-group"),Bt=Symbol(Tt),ye={name:D,disabled:Boolean,iconSize:M,modelValue:D,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var Lt=O({props:J({},ye,{bem:Qe(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:Y,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:n,slots:i}){const c=P(),a=l=>{if(e.parent&&e.bindGroup)return e.parent.props[l]},r=w(()=>{if(e.parent&&e.bindGroup){const l=a("disabled")||e.disabled;if(e.role==="checkbox"){const V=a("modelValue").length,k=a("max"),h=k&&V>=+k;return l||h&&!e.checked}return l}return e.disabled}),C=w(()=>a("direction")),m=w(()=>{const l=e.checkedColor||a("checkedColor");if(l&&(e.checked||e.indeterminate)&&!r.value)return{borderColor:l,backgroundColor:l}}),s=w(()=>e.shape||a("shape")||"round"),b=l=>{const{target:V}=l,k=c.value,h=k===V||k?.contains(V);!r.value&&(h||!e.labelDisabled)&&n("toggle"),n("click",l)},f=()=>{var l,V;const{bem:k,checked:h,indeterminate:I}=e,S=e.iconSize||a("iconSize");return o("div",{ref:c,class:k("icon",[s.value,{disabled:r.value,checked:h,indeterminate:I}]),style:s.value!=="dot"?{fontSize:N(S)}:{width:N(S),height:N(S),borderColor:(l=m.value)==null?void 0:l.borderColor}},[i.icon?i.icon({checked:h,disabled:r.value}):s.value!=="dot"?o($,{name:I?"minus":"success",style:m.value},null):o("div",{class:k("icon--dot__icon"),style:{backgroundColor:(V=m.value)==null?void 0:V.backgroundColor}},null)])},g=()=>{const{checked:l}=e;if(i.default)return o("span",{class:e.bem("label",[e.labelPosition,{disabled:r.value}])},[i.default({checked:l,disabled:r.value})])};return()=>{const l=e.labelPosition==="left"?[g(),f()]:[f(),g()];return o("div",{role:e.role,class:e.bem([{disabled:r.value,"label-disabled":e.labelDisabled},C.value]),tabindex:r.value?void 0:0,"aria-checked":e.checked,onClick:b},[l])}}});const[Rt,Mt]=G("checkbox"),At=J({},ye,{shape:String,bindGroup:Y,indeterminate:{type:Boolean,default:null}});var Dt=O({name:Rt,props:At,emits:["change","update:modelValue"],setup(e,{emit:n,slots:i}){const{parent:c}=fe(Bt),a=m=>{const{name:s}=e,{max:b,modelValue:f}=c.props,g=f.slice();if(m)!(b&&g.length>=+b)&&!g.includes(s)&&(g.push(s),e.bindGroup&&c.updateValue(g));else{const l=g.indexOf(s);l!==-1&&(g.splice(l,1),e.bindGroup&&c.updateValue(g))}},r=w(()=>c&&e.bindGroup?c.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),C=(m=!r.value)=>{c&&e.bindGroup?a(m):n("update:modelValue",m),e.indeterminate!==null&&n("change",m)};return me(()=>e.modelValue,m=>{e.indeterminate===null&&n("change",m)}),ge({toggle:C,props:e,checked:r}),Ze(()=>e.modelValue),()=>o(Lt,H({bem:Mt,role:"checkbox",parent:c,checked:r.value,onToggle:C},e),pe(i,["default","icon"]))}});const $t=X(Dt),[Ot,de]=G("cell-group"),zt={title:String,inset:Boolean,border:Y};var qt=O({name:Ot,inheritAttrs:!1,props:zt,setup(e,{slots:n,attrs:i}){const c=()=>{var r;return o("div",H({class:[de({inset:e.inset}),{[nt]:e.border&&!e.inset}]},i,tt()),[(r=n.default)==null?void 0:r.call(n)])},a=()=>o("div",{class:de("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?o(et,null,[a(),c()]):c()}});const Nt=X(qt),Gt={class:"login-container"},Ft={class:"login-options"},Wt=O({__name:"index",setup(e){const n=it(),i=lt(),c=at(),a=P(""),r=P(""),C=P(!1),m=P(!1),s=P(""),b=P("");be(()=>{if(c.isLogin){const g=i.query.redirect||"/";n.replace(g)}else{const g=localStorage.getItem("username");g&&(a.value=g,C.value=!0)}});const f=async()=>{if(s.value="",b.value="",!a.value){s.value="请输入账号";return}if(!r.value){b.value="请输入密码";return}m.value=!0;try{const g=await ct({username:a.value,password:r.value});c.setToken(g.token),C.value?localStorage.setItem("username",a.value):localStorage.removeItem("username"),se({type:"success",message:"登录成功！"});const l=i.query.redirect||"/";n.replace(l)}catch(g){se({type:"fail",message:"登录失败："+(g?.message||"未知错误")})}finally{m.value=!1}};return(g,l)=>{const V=Pt,k=$t,h=ft,I=Nt;return ot(),rt("div",Gt,[l[4]||(l[4]=B("div",{class:"login-header"},[B("h1",null,"欢迎登录"),B("p",{class:"subtitle"},"请输入您的账号和密码")],-1)),o(I,{inset:""},{default:ee(()=>[o(V,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=S=>a.value=S),label:"账号",placeholder:"请输入手机号/邮箱",required:"","error-message":s.value,clearable:""},null,8,["modelValue","error-message"]),o(V,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=S=>r.value=S),type:"password",label:"密码",placeholder:"请输入密码",required:"","error-message":b.value,clearable:""},null,8,["modelValue","error-message"]),B("div",Ft,[o(k,{modelValue:C.value,"onUpdate:modelValue":l[2]||(l[2]=S=>C.value=S)},{default:ee(()=>[...l[3]||(l[3]=[z("记住账号",-1)])]),_:1},8,["modelValue"])]),o(h,{block:"",type:"primary",loading:m.value,onClick:f},{default:ee(()=>[z(st(m.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1}),l[5]||(l[5]=B("div",{class:"footer"},[B("p",{class:"privacy"},[z(" 登录即表示同意 "),B("a",{href:"#"},"《用户协议》"),z(" 和 "),B("a",{href:"#"},"《隐私政策》")])],-1))])}}}),jt=(e,n)=>{const i=e.__vccOpts||e;for(const[c,a]of n)i[c]=a;return i},Ht=jt(Wt,[["__scopeId","data-v-f5409054"]]);export{Ht as default};
