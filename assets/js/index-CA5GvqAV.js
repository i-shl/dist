import{d as h,_ as k,r,a4 as I,v as E,z as S,p as T,X as s,a as d,s as v,A as f,x as B,C as D,b6 as q,Z as _}from"./index-js4bVs2_.js";import{C as L}from"./index-BSyOgi1f.js";import{C as N}from"./index-Cd4wkifo.js";import"./index-BAc5JALO.js";import{F as R}from"./index-Bs9JoLZN.js";import{B as U}from"./index-FGkqOdiN.js";import{_ as A}from"./_plugin-vue_export-helper-C9BJcFhI.js";import"./use-route-B3Sw8vgr.js";import"./use-id-C8IYf1c2.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};a.SENTRY_RELEASE={id:"51ca7370d41ada6ac5875e201d0b99f0587c6a8e"}}catch{}})();try{(function(){var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new a.Error().stack;l&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[l]="78ac270f-0467-4baa-8916-a79fe06774f7",a._sentryDebugIdIdentifier="sentry-dbid-78ac270f-0467-4baa-8916-a79fe06774f7")})()}catch{}const F={class:"login-container"},G={class:"login-options"},M=h({__name:"index",setup(a){const l=S(),g=E(),b=k(),t=r(""),u=r(""),i=r(!1),p=r(!1),c=r(""),m=r("");I(()=>{if(b.isLogin){const o=g.query.redirect||"/";l.replace(o)}else{const o=localStorage.getItem("username");o&&(t.value=o,i.value=!0)}});const w=async()=>{if(c.value="",m.value="",!t.value){c.value="请输入账号";return}if(!u.value){m.value="请输入密码";return}p.value=!0;try{const o=await q({username:t.value,password:u.value});b.setToken(o.token),i.value?localStorage.setItem("username",t.value):localStorage.removeItem("username"),_({type:"success",message:"登录成功！"});const e=g.query.redirect||"/";l.replace(e)}catch(o){_({type:"fail",message:"登录失败："+(o?.message||"未知错误")})}finally{p.value=!1}};return(o,e)=>{const y=R,V=N,x=U,C=L;return B(),T("div",F,[e[4]||(e[4]=s("div",{class:"login-header"},[s("h1",null,"欢迎登录"),s("p",{class:"subtitle"},"请输入您的账号和密码")],-1)),d(C,{inset:""},{default:v(()=>[d(y,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value=n),label:"账号",placeholder:"请输入手机号/邮箱",required:"","error-message":c.value,clearable:""},null,8,["modelValue","error-message"]),d(y,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=n=>u.value=n),type:"password",label:"密码",placeholder:"请输入密码",required:"","error-message":m.value,clearable:""},null,8,["modelValue","error-message"]),s("div",G,[d(V,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=n=>i.value=n)},{default:v(()=>[...e[3]||(e[3]=[f("记住账号",-1)])]),_:1},8,["modelValue"])]),d(x,{block:"",type:"primary",loading:p.value,onClick:w},{default:v(()=>[f(D(p.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1}),e[5]||(e[5]=s("div",{class:"footer"},[s("p",{class:"privacy"},[f(" 登录即表示同意 "),s("a",{href:"#"},"《用户协议》"),f(" 和 "),s("a",{href:"#"},"《隐私政策》")])],-1))])}}}),O=A(M,[["__scopeId","data-v-fb950c82"]]);export{O as default};
