import{d as J,v as D,y as k,J as W,z as U,r as F,K as j,M as re,$ as fe,c as d,D as q,B as P,b0 as ve,g as G,aO as de,aP as he,aX as ge,aY as we,E as me,b as _,aV as $,H as K,F as Q,O as be,V as R,al as ye,aI as pe,I as Z,Y as Te}from"./index-D3iEbD-x.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"0b41023e4cb7a08a546cdc5389cade6da56f1f8a"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},h=new e.Error().stack;h&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[h]="265fb0b4-fb9d-4453-adcf-920469af67d6",e._sentryDebugIdIdentifier="sentry-dbid-265fb0b4-fb9d-4453-adcf-920469af67d6")})()}catch{}const[ee,A]=U("swipe"),Se={loop:D,width:W,height:W,vertical:Boolean,autoplay:k(0),duration:k(500),touchable:D,lazyRender:Boolean,initialSwipe:k(0),indicatorColor:String,showIndicators:D,stopPropagation:D},te=Symbol(ee);var xe=J({name:ee,props:Se,emits:["change","dragStart","dragEnd"],setup(e,{emit:h,slots:w}){const u=F(),g=F(),a=j({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let p=!1;const r=re(),{children:m,linkChildren:s}=fe(te),i=d(()=>m.length),o=d(()=>a[e.vertical?"height":"width"]),f=d(()=>e.vertical?r.deltaY.value:r.deltaX.value),y=d(()=>a.rect?(e.vertical?a.rect.height:a.rect.width)-o.value*i.value:0),z=d(()=>o.value?Math.ceil(Math.abs(y.value)/o.value):i.value),M=d(()=>i.value*o.value),T=d(()=>(a.active+i.value)%i.value),Y=d(()=>{const t=e.vertical?"vertical":"horizontal";return r.direction.value===t}),ae=d(()=>{const t={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+a.offset.toFixed(2)}px)`};if(o.value){const l=e.vertical?"height":"width",n=e.vertical?"width":"height";t[l]=`${M.value}px`,t[n]=e[n]?`${e[n]}px`:""}return t}),ie=t=>{const{active:l}=a;return t?e.loop?R(l+t,-1,i.value):R(l+t,0,z.value):l},B=(t,l=0)=>{let n=t*o.value;e.loop||(n=Math.min(n,-y.value));let v=l-n;return e.loop||(v=R(v,y.value,0)),v},b=({pace:t=0,offset:l=0,emitChange:n})=>{if(i.value<=1)return;const{active:v}=a,c=ie(t),I=B(c,l);if(e.loop){if(m[0]&&I!==y.value){const O=I<y.value;m[0].setOffset(O?M.value:0)}if(m[i.value-1]&&I!==0){const O=I>0;m[i.value-1].setOffset(O?-M.value:0)}}a.active=c,a.offset=I,n&&c!==v&&h("change",T.value)},C=()=>{a.swiping=!0,a.active<=-1?b({pace:i.value}):a.active>=i.value&&b({pace:-i.value})},ne=()=>{C(),r.reset(),$(()=>{a.swiping=!1,b({pace:-1,emitChange:!0})})},X=()=>{C(),r.reset(),$(()=>{a.swiping=!1,b({pace:1,emitChange:!0})})};let H;const x=()=>clearTimeout(H),E=()=>{x(),+e.autoplay>0&&i.value>1&&(H=setTimeout(()=>{X(),E()},+e.autoplay))},S=(t=+e.initialSwipe)=>{if(!u.value)return;const l=()=>{var n,v;if(!K(u)){const c={width:u.value.offsetWidth,height:u.value.offsetHeight};a.rect=c,a.width=+((n=e.width)!=null?n:c.width),a.height=+((v=e.height)!=null?v:c.height)}i.value&&(t=Math.min(i.value-1,t),t===-1&&(t=i.value-1)),a.active=t,a.swiping=!0,a.offset=B(t),m.forEach(c=>{c.setOffset(0)}),E()};K(u)?Q().then(l):l()},N=()=>S(a.active);let V;const le=t=>{!e.touchable||t.touches.length>1||(r.start(t),p=!1,V=Date.now(),x(),C())},oe=t=>{e.touchable&&a.swiping&&(r.move(t),Y.value&&(!e.loop&&(a.active===0&&f.value>0||a.active===i.value-1&&f.value<0)||(be(t,e.stopPropagation),b({offset:f.value}),p||(h("dragStart",{index:T.value}),p=!0))))},L=()=>{if(!e.touchable||!a.swiping)return;const t=Date.now()-V,l=f.value/t;if((Math.abs(l)>.25||Math.abs(f.value)>o.value/2)&&Y.value){const v=e.vertical?r.offsetY.value:r.offsetX.value;let c=0;e.loop?c=v>0?f.value>0?-1:1:0:c=-Math[f.value>0?"ceil":"floor"](f.value/o.value),b({pace:c,emitChange:!0})}else f.value&&b({pace:0});p=!1,a.swiping=!1,h("dragEnd",{index:T.value}),E()},se=(t,l={})=>{C(),r.reset(),$(()=>{let n;e.loop&&t===i.value?n=a.active===0?0:t:n=t%i.value,l.immediate?$(()=>{a.swiping=!1}):a.swiping=!1,b({pace:n-a.active,emitChange:!0})})},ce=(t,l)=>{const n=l===T.value,v=n?{backgroundColor:e.indicatorColor}:void 0;return _("i",{style:v,class:A("indicator",{active:n})},null)},ue=()=>{if(w.indicator)return w.indicator({active:T.value,total:i.value});if(e.showIndicators&&i.value>1)return _("div",{class:A("indicators",{vertical:e.vertical})},[Array(i.value).fill("").map(ce)])};return q({prev:ne,next:X,state:a,resize:N,swipeTo:se}),s({size:o,props:e,count:i,activeIndicator:T}),P(()=>e.initialSwipe,t=>S(+t)),P(i,()=>S(a.active)),P(()=>e.autoplay,E),P([ye,pe,()=>e.width,()=>e.height],N),P(ve(),t=>{t==="visible"?E():x()}),G(S),de(()=>S(a.active)),he(()=>S(a.active)),ge(x),we(x),me("touchmove",oe,{target:g}),()=>{var t;return _("div",{ref:u,class:A()},[_("div",{ref:g,style:ae.value,class:A("track",{vertical:e.vertical}),onTouchstartPassive:le,onTouchend:L,onTouchcancel:L},[(t=w.default)==null?void 0:t.call(w)]),ue()])}}});const Ce=Z(xe),[Ee,Ie]=U("swipe-item");var Pe=J({name:Ee,setup(e,{slots:h}){let w;const u=j({offset:0,inited:!1,mounted:!1}),{parent:g,index:a}=Te(te);if(!g)return;const p=d(()=>{const s={},{vertical:i}=g.props;return g.size.value&&(s[i?"height":"width"]=`${g.size.value}px`),u.offset&&(s.transform=`translate${i?"Y":"X"}(${u.offset}px)`),s}),r=d(()=>{const{loop:s,lazyRender:i}=g.props;if(!i||w)return!0;if(!u.mounted)return!1;const o=g.activeIndicator.value,f=g.count.value-1,y=o===0&&s?f:o-1,z=o===f&&s?0:o+1;return w=a.value===o||a.value===y||a.value===z,w}),m=s=>{u.offset=s};return G(()=>{Q(()=>{u.mounted=!0})}),q({setOffset:m}),()=>{var s;return _("div",{class:Ie(),style:p.value},[r.value?(s=h.default)==null?void 0:s.call(h):null])}}});const De=Z(Pe);export{Ce as S,De as a};
